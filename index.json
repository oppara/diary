[{"content":"はじめに VSCode を使わない環境での Intelephense のライセンスキーの設定方法の備呆録\n対応方法 以下のテキストファイルにライセンスキーを記載する。\n~/intelephense/licence.txt 参考サイト Intelephense \u0026ndash; Frequently Asked Questions (FAQ) 環境 % sw_vers ProductName: macOS ProductVersion: 15.6 BuildVersion: 24G84 ","permalink":"https://d.oppara.tv/posts/2025/08/php-intelephense-licence/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eVSCode を使わない環境での Intelephense のライセンスキーの設定方法の備呆録\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cp\u003e以下のテキストファイルにライセンスキーを記載する。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-text\" data-lang=\"text\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e~/intelephense/licence.txt\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"参考サイト\"\u003e参考サイト\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://intelephense.com/faq.html\"\u003eIntelephense \u0026ndash; Frequently Asked Questions (FAQ)\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% sw_vers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductName:            macOS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductVersion:         15.6\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuildVersion:           24G84\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"VSCode を使わない環境での Intelephense のライセンスキーの設定方法"},{"content":"はじめに シェルスクリプトを使用して、AWS SES でメールを送信する備呆録。\n手順 #!/usr/bin/env bash set -CEeuo pipefail SES_FROM=\u0026#34;admin@oppara.tv\u0026#34; SES_TO=\u0026#34;admin@oppara.tv\u0026#34; SES_REGION=\u0026#34;ap-northeast-1\u0026#34; SES_SUBJECT=\u0026#34;テストメール from SES\u0026#34; SES_BODY=\u0026#34;ほげほげ\u0026#34; aws ses send-email \\ --from \u0026#34;$SES_FROM\u0026#34; \\ --destination \u0026#34;ToAddresses=$SES_TO\u0026#34; \\ --message \u0026#34;Subject={Data=$SES_SUBJECT,Charset=utf-8},Body={Text={Data=$SES_BODY,Charset=utf-8}}\u0026#34; \\ --region \u0026#34;$SES_REGION\u0026#34; 環境 % aws --version aws-cli/2.27.26 Python/3.13.3 Darwin/24.3.0 source/arm64 ","permalink":"https://d.oppara.tv/posts/2025/06/sending-email-by-ses-on-shell-script/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eシェルスクリプトを使用して、AWS SES でメールを送信する備呆録。\u003c/p\u003e\n\u003ch2 id=\"手順\"\u003e手順\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/usr/bin/env bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003eset -CEeuo pipefail\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSES_FROM\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;admin@oppara.tv\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSES_TO\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;admin@oppara.tv\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSES_REGION\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ap-northeast-1\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSES_SUBJECT\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;テストメール from SES\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSES_BODY\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ほげほげ\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws ses send-email \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --from \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$SES_FROM\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --destination \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ToAddresses=\u003c/span\u003e$SES_TO\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --message \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Subject={Data=\u003c/span\u003e$SES_SUBJECT\u003cspan style=\"color:#e6db74\"\u003e,Charset=utf-8},Body={Text={Data=\u003c/span\u003e$SES_BODY\u003cspan style=\"color:#e6db74\"\u003e,Charset=utf-8}}\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --region \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$SES_REGION\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% aws --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws-cli/2.27.26 Python/3.13.3 Darwin/24.3.0 source/arm64\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"シェルスクリプトを使用して、AWS SESでメールを送信する"},{"content":"はじめに SELinux で httpd からのファイルへのアクセスを許可する方法の備忘録。\n前提 /var/app/tmp に httpd からアクセスする場合を想定する。\n対応方法 # chcon -R -t httpd_sys_rw_content_t /var/app/tmp 永続化\n# semanage fcontext -a -t httpd_sys_rw_content_t /var/app/tmp 確認\n# ls -alFZ /var/app/tmp 参考サイト SELinuxでApacheからのファイルへのアクセスを許可する - tech-notes 環境 $ cat /etc/system-release Amazon Linux release 2023.6.20250123 (Amazon Linux) ","permalink":"https://d.oppara.tv/posts/2025/02/selinux-httpd/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eSELinux で httpd からのファイルへのアクセスを許可する方法の備忘録。\u003c/p\u003e\n\u003ch2 id=\"前提\"\u003e前提\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e/var/app/tmp\u003c/code\u003e に httpd からアクセスする場合を想定する。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e# chcon -R -t httpd_sys_rw_content_t /var/app/tmp\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e永続化\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e# semanage fcontext -a -t httpd_sys_rw_content_t /var/app/tmp\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e確認\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e# ls -alFZ /var/app/tmp\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"参考サイト\"\u003e参考サイト\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://scrapbox.io/tech-notes/SELinux%E3%81%A7Apache%E3%81%8B%E3%82%89%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%B8%E3%81%AE%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%82%92%E8%A8%B1%E5%8F%AF%E3%81%99%E3%82%8B\"\u003eSELinuxでApacheからのファイルへのアクセスを許可する - tech-notes\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ cat /etc/system-release\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAmazon Linux release 2023.6.20250123 (Amazon Linux)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"SELinux で httpd からのファイルへのアクセスを許可する"},{"content":"はじめに よく忘れるので、備呆録。\n手順 \u0026lt;?php declare(strict_types=1); function retry($retries, $sleep, callable $callback) { for ($i = 1; $i \u0026lt;= $retries; $i++) { try { return $callback(); } catch (Exception $e) { echo \u0026#34;attempt: $i\u0026#34; . PHP_EOL; echo $e-\u0026gt;getMessage() . PHP_EOL; $delay = $sleep * $i; echo \u0026#34;delay: $delay\u0026#34; . PHP_EOL; sleep($delay); } } throw new Exception(\u0026#39;Failed after \u0026#39; . $retries . \u0026#39; retries\u0026#39;); } function hoge() { throw new Exception(\u0026#39;error\u0026#39;); } retry(3, 1, \u0026#39;hoge\u0026#39;); 環境 % sw_vers ProductName: macOS ProductVersion: 15.2 BuildVersion: 24C101 % php -v PHP 8.2.27 (cli) (built: Dec 17 2024 11:39:23) (NTS) Copyright (c) The PHP Group Zend Engine v4.2.27, Copyright (c) Zend Technologies with Zend OPcache v8.2.27, Copyright (c), by Zend Technologies ","permalink":"https://d.oppara.tv/posts/2025/01/php-retry/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eよく忘れるので、備呆録。\u003c/p\u003e\n\u003ch2 id=\"手順\"\u003e手順\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-php\" data-lang=\"php\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e\u0026lt;?\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ephp\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edeclare\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003estrict_types\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eretry\u003c/span\u003e($retries, $sleep, \u003cspan style=\"color:#a6e22e\"\u003ecallable\u003c/span\u003e $callback)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e ($i \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e; $i \u003cspan style=\"color:#f92672\"\u003e\u0026lt;=\u003c/span\u003e $retries; $i\u003cspan style=\"color:#f92672\"\u003e++\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003etry\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e $callback();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        } \u003cspan style=\"color:#66d9ef\"\u003ecatch\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003eException\u003c/span\u003e $e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eecho\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;attempt: \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e$i\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePHP_EOL\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eecho\u003c/span\u003e $e\u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003egetMessage\u003c/span\u003e() \u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePHP_EOL\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            $delay \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e $sleep \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e $i;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eecho\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;delay: \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e$delay\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePHP_EOL\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#a6e22e\"\u003esleep\u003c/span\u003e($delay);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ethrow\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eException\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Failed after \u0026#39;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e $retries \u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39; retries\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ehoge\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ethrow\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eException\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;error\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eretry\u003c/span\u003e(\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;hoge\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% sw_vers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductName:            macOS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductVersion:         15.2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuildVersion:           24C101\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% php -v\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePHP 8.2.27 (cli) (built: Dec 17 2024 11:39:23) (NTS)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCopyright (c) The PHP Group\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eZend Engine v4.2.27, Copyright (c) Zend Technologies\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    with Zend OPcache v8.2.27, Copyright (c), by Zend Technologies\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"PHP リトライのテンプレート"},{"content":"はじめに Fluentd で設定ファイルを確認する方法についての備呆録。\nCLI % fluentd --dry-run -c /etc/fluentd/fluent.conf Docker プラグイン使っている場合は、あらかじめインストールしておく必要がある。\n% docker run \\ -ti --rm \\ --platform linux/x86_64 \\ -v ./:/fluentd/etc -v ./:/var/log \\ fluent/fluentd:v1.8-debian-1 --dry-run -c /fluentd/etc/hoge.conf fluentd --dry-run -c /fluentd/etc/hoge.conf 2025-01-12 09:07:29 +0000 [info]: parsing config file is succeeded path=\u0026#34;/fluentd/etc/hoge.conf\u0026#34; 2025-01-12 09:07:29 +0000 [info]: gem \u0026#39;fluentd\u0026#39; version \u0026#39;1.8.1\u0026#39; 2025-01-12 09:07:29 +0000 [info]: starting fluentd-1.8.1 as dry run mode ruby=\u0026#34;2.6.5\u0026#34; 2025-01-12 09:07:29 +0000 [info]: using configuration file: \u0026lt;ROOT\u0026gt; \u0026lt;source\u0026gt; @type tail path \u0026#34;/var/log/httpd-access.log\u0026#34; pos_file \u0026#34;/var/log/td-agent/httpd-access.log.pos\u0026#34; tag \u0026#34;s3.apache.access\u0026#34; \u0026lt;parse\u0026gt; @type \u0026#34;apache2\u0026#34; \u0026lt;/parse\u0026gt; \u0026lt;/source\u0026gt; \u0026lt;match log.**\u0026gt; @type file path \u0026#34;/var/log/fluent/myapp\u0026#34; compress gzip \u0026lt;buffer\u0026gt; timekey 1d timekey_use_utc true timekey_wait 10m path \u0026#34;/var/log/fluent/myapp\u0026#34; \u0026lt;/buffer\u0026gt; \u0026lt;/match\u0026gt; \u0026lt;/ROOT\u0026gt; 2025-01-12 09:07:29 +0000 [info]: finsihed dry run mode 環境 % sw_vers ProductName: macOS ProductVersion: 15.2 BuildVersion: 24C101 % docker --version Docker version 27.4.0, build bde2b89 ","permalink":"https://d.oppara.tv/posts/2025/01/fluentd-dry-run/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://www.fluentd.org/\"\u003eFluentd\u003c/a\u003e で設定ファイルを確認する方法についての備呆録。\u003c/p\u003e\n\u003ch2 id=\"cli\"\u003eCLI\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% fluentd --dry-run -c /etc/fluentd/fluent.conf\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"docker\"\u003eDocker\u003c/h2\u003e\n\u003cp\u003eプラグイン使っている場合は、あらかじめインストールしておく必要がある。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% docker run \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e-ti --rm \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e--platform linux/x86_64 \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-v ./:/fluentd/etc -v ./:/var/log \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efluent/fluentd:v1.8-debian-1 --dry-run -c /fluentd/etc/hoge.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003efluentd --dry-run -c /fluentd/etc/hoge.conf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e2025-01-12 09:07:29 +0000 [info]: parsing config file is succeeded path=\u0026#34;/fluentd/etc/hoge.conf\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e2025-01-12 09:07:29 +0000 [info]: gem \u0026#39;fluentd\u0026#39; version \u0026#39;1.8.1\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e2025-01-12 09:07:29 +0000 [info]: starting fluentd-1.8.1 as dry run mode ruby=\u0026#34;2.6.5\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e2025-01-12 09:07:29 +0000 [info]: using configuration file: \u0026lt;ROOT\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u0026lt;source\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    @type tail\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    path \u0026#34;/var/log/httpd-access.log\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    pos_file \u0026#34;/var/log/td-agent/httpd-access.log.pos\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    tag \u0026#34;s3.apache.access\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u0026lt;parse\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      @type \u0026#34;apache2\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u0026lt;/parse\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u0026lt;/source\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u0026lt;match log.**\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    @type file\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    path \u0026#34;/var/log/fluent/myapp\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    compress gzip\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u0026lt;buffer\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      timekey 1d\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      timekey_use_utc true\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      timekey_wait 10m\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      path \u0026#34;/var/log/fluent/myapp\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u0026lt;/buffer\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u0026lt;/match\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u0026lt;/ROOT\u0026gt;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e2025-01-12 09:07:29 +0000 [info]: finsihed dry run mode\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% sw_vers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductName:            macOS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductVersion:         15.2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuildVersion:           24C101\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% docker --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDocker version 27.4.0, build bde2b89\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Fluentd で dry-run"},{"content":"はじめに MySQL でデータベース内のすべてのテーブルを削除する方法の備忘録。\n手順 DROP 文を作成して実行する。\n$ echo \u0026#34;SET FOREIGN_KEY_CHECKS = 0;\u0026#34; \u0026gt; /patht/to/tmp.sql $ mysqldump -h $DB_HOST --single-transaction --add-drop-table --no-data -u $DB_USER -p $DB_NAME | grep \u0026#39;DROP TABLE\u0026#39; \u0026gt;\u0026gt; /path/to/tmp.sql $ echo \u0026#34;SET FOREIGN_KEY_CHECKS = 1;\u0026#34; \u0026gt;\u0026gt; /path/to/tmp.sql $ mysql -h $DB_HOST -u $DB_USER -p $DB_NAME \u0026lt; /path/to/tmp.sql ","permalink":"https://d.oppara.tv/posts/2024/10/mysql-drop-all-table/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eMySQL でデータベース内のすべてのテーブルを削除する方法の備忘録。\u003c/p\u003e\n\u003ch2 id=\"手順\"\u003e手順\u003c/h2\u003e\n\u003cp\u003eDROP 文を作成して実行する。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;SET FOREIGN_KEY_CHECKS = 0;\u0026#34;\u003c/span\u003e \u0026gt; /patht/to/tmp.sql\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mysqldump -h $DB_HOST --single-transaction --add-drop-table --no-data -u $DB_USER -p $DB_NAME | grep \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;DROP TABLE\u0026#39;\u003c/span\u003e \u0026gt;\u0026gt; /path/to/tmp.sql\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;SET FOREIGN_KEY_CHECKS = 1;\u0026#34;\u003c/span\u003e \u0026gt;\u0026gt; /path/to/tmp.sql\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e$ mysql -h $DB_HOST -u $DB_USER -p $DB_NAME \u0026lt; /path/to/tmp.sql\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"MySQL ですべてのテーブルを削除する"},{"content":"TARGET_TAG=\u0026#34;hoge\u0026#34; aws ec2 describe-instances \\ --filter \u0026#34;Name=instance-state-name,Values=running\u0026#34; \u0026#34;Name=tag:Name,Values=${TARGET_TAG}\u0026#34; \\ | jq -r \u0026#39;.Reservations[].Instances[] | .PrivateIpAddress \u0026#39; ec2:DescribeInstancesポリシーが必要。\n環境 $ aws --version aws-cli/2.17.41 Python/3.11.9 Linux/6.1.102-111.182.amzn2023.x86_64 exec-env/CloudShell exe/x86_64.amzn.2023 ","permalink":"https://d.oppara.tv/posts/2024/09/aws-ec2-describe-private-ip/","summary":"\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eTARGET_TAG\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hoge\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws ec2 describe-instances \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --filter \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Name=instance-state-name,Values=running\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Name=tag:Name,Values=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eTARGET_TAG\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    | jq -r \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;.Reservations[].Instances[] | .PrivateIpAddress \u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003ccode\u003eec2:DescribeInstances\u003c/code\u003eポリシーが必要。\u003c/p\u003e\n\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ aws --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws-cli/2.17.41 Python/3.11.9 Linux/6.1.102-111.182.amzn2023.x86_64 exec-env/CloudShell exe/x86_64.amzn.2023\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"運用中で指定した名前の EC2 のプライベートアドレスを取得する"},{"content":"使いどころ 例えば、サーバのアップグレード時に、実際に通信が途切れてないか 1 秒に 1 回サーバにアクセスして接続を確認したい時とか。\n手順 url=https://oppara.tv/ while true; do TZ=JST-9 date; curl -I \u0026#34;$url\u0026#34;; sleep 1s; done Mac の場合\nurl=https://oppara.tv/ while true; do TZ=JST-9 date; curl -I $url; sleep 1; done 環境 % sw_vers ProductName: macOS ProductVersion: 14.4.1 BuildVersion: 23E224 ","permalink":"https://d.oppara.tv/posts/2024/06/curl-per-second/","summary":"\u003ch2 id=\"使いどころ\"\u003e使いどころ\u003c/h2\u003e\n\u003cp\u003e例えば、サーバのアップグレード時に、実際に通信が途切れてないか 1 秒に 1 回サーバにアクセスして接続を確認したい時とか。\u003c/p\u003e\n\u003ch2 id=\"手順\"\u003e手順\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eurl=https://oppara.tv/\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ewhile true; do TZ=JST-9 date; curl -I \u0026#34;$url\u0026#34;; sleep 1s; done\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eMac の場合\u003c/p\u003e","title":"1 秒に 1 回サーバにアクセスするコマンド"},{"content":"問題 WordPress の管理画面でカテゴリーをチェックすると、そのカテゴリーが上に表示されるのを止めたい。\n対応方法 add_filter(\u0026#39;wp_terms_checklist_args\u0026#39;, function($args) { $args[\u0026#39;checked_ontop\u0026#39;] = false; return $args; }); 参考サイト WordPressの設置の際に気を配りたい。カテゴリーの階層構造について | 株式会社LIG(リグ)｜DX支援・システム開発・Web制作 環境 % wp core version 6.5.3 ","permalink":"https://d.oppara.tv/posts/2024/05/wp-terms-checked-ontop/","summary":"\u003ch2 id=\"問題\"\u003e問題\u003c/h2\u003e\n\u003cp\u003eWordPress の管理画面でカテゴリーをチェックすると、そのカテゴリーが上に表示されるのを止めたい。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-php\" data-lang=\"php\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eadd_filter\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;wp_terms_checklist_args\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e($args) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    $args[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;checked_ontop\u0026#39;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e $args;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e});\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"参考サイト\"\u003e参考サイト\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://liginc.co.jp/programmer/archives/2931\"\u003eWordPressの設置の際に気を配りたい。カテゴリーの階層構造について | 株式会社LIG(リグ)｜DX支援・システム開発・Web制作\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% wp core version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e6.5.3\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"WordPress の管理画面でチェックされたカテゴリーが上に表示されるのを抑止する"},{"content":"はじめに Zabbix のトリガー /: Disk space is low の条件の備呆録\n/: Disk space is low トリガーの条件 last(/oppara.tv/vfs.fs.size[/,pused])\u0026gt;{$VFS.FS.PUSED.MAX.WARN:\u0026#34;/\u0026#34;} and ((last(/oppara.tv/vfs.fs.size[/,total])-last(/oppara.tv/vfs.fs.size[/,used]))\u0026lt;{$VFS.FS.FREE.MIN.WARN:\u0026#34;/\u0026#34;} or timeleft(/oppara.tv/vfs.fs.size[/,pused],1h,100)\u0026lt;1d) 見やすく整形してみる。\nlast(/oppara.tv/vfs.fs.size[/, pused]) \u0026gt; {$VFS.FS.PUSED.MAX.WARN:\u0026#34;/\u0026#34;} and ( (last(/oppara.tv/vfs.fs.size[/, total]) - last(/oppara.tv/vfs.fs.size[/, used])) \u0026lt; {$VFS.FS.FREE.MIN.WARN:\u0026#34;/\u0026#34;} or timeleft(/oppara.tv/vfs.fs.size[/, pused], 1h, 100) \u0026lt; 1d ) 日本語にしてみる。\nディスク使用率が $VFS.FS.PUSED.MAX.WARN より大きい かつ ( ディスク残量が $VFS.FS.FREE.MIN.WARN より小さい もしくは 1日以内にディスク使用率が100%となる ) 環境 $ zabbix_server --version zabbix_server (Zabbix) 6.0.23 ","permalink":"https://d.oppara.tv/posts/2024/05/zabbix-disk-space-is-low/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eZabbix のトリガー \u003ccode\u003e/: Disk space is low\u003c/code\u003e の条件の備呆録\u003c/p\u003e\n\u003ch2 id=\"-disk-space-is-low-トリガーの条件\"\u003e\u003ccode\u003e/: Disk space is low\u003c/code\u003e トリガーの条件\u003c/h2\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003elast(/oppara.tv/vfs.fs.size[/,pused])\u0026gt;{$VFS.FS.PUSED.MAX.WARN:\u0026#34;/\u0026#34;} and ((last(/oppara.tv/vfs.fs.size[/,total])-last(/oppara.tv/vfs.fs.size[/,used]))\u0026lt;{$VFS.FS.FREE.MIN.WARN:\u0026#34;/\u0026#34;} or timeleft(/oppara.tv/vfs.fs.size[/,pused],1h,100)\u0026lt;1d)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e見やすく整形してみる。\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003elast(/oppara.tv/vfs.fs.size[/, pused]) \u0026gt; {$VFS.FS.PUSED.MAX.WARN:\u0026#34;/\u0026#34;} \nand \n(\n  (last(/oppara.tv/vfs.fs.size[/, total]) - last(/oppara.tv/vfs.fs.size[/, used])) \u0026lt; {$VFS.FS.FREE.MIN.WARN:\u0026#34;/\u0026#34;} \n  or \n  timeleft(/oppara.tv/vfs.fs.size[/, pused], 1h, 100) \u0026lt; 1d\n)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e日本語にしてみる。\u003c/p\u003e","title":"Zabbix `Disk space is low` トリガーの条件"},{"content":"はじめに openssl を使って証明書の諸々を確認する方法の備忘録。\n証明書のコモンネームと有効開始日・有効期限日を確認する % openssl x509 -noout -subject -dates -in oppara.tv.crt subject=CN=oppara.tv notBefore=Jan 31 19:06:53 2024 GMT notAfter=Apr 30 19:06:52 2024 GMT 証明書と秘密鍵の「整合性」を確認する ハッシュが同じであれば整合性が取れている。\n% openssl x509 -noout -modulus -in oppara.tv.cert | md5sum 48f8be8df2822b4f302fc16276566f9e - % openssl rsa -noout -modulus -in oppara.tv.key | md5sum 48f8be8df2822b4f302fc16276566f9e - 証明書と中間証明書の「整合性」を確認する ハッシュが同じであれば整合性が取れている。\n% openssl x509 -issuer_hash -noout -in oppara.tv.cert 8d33f237 % openssl x509 -subject_hash -noout -in chain.cert 8d33f237 リモートの証明書のコモンネームと有効開始日・有効期限日を確認する % echo | openssl s_client -connect oppara.tv:443 2\u0026gt; /dev/null | openssl x509 -noout -subject -dates 2\u0026gt; /dev/null subject=CN=oppara.tv notBefore=Jan 14 00:17:24 2024 GMT notAfter=Apr 13 00:17:23 2024 GMT 環境 % sw_vers ProductName: macOS ProductVersion: 14.2.1 BuildVersion: 23C71 % openssl -version OpenSSL 3.2.1 30 Jan 2024 (Library: OpenSSL 3.2.1 30 Jan 2024) ","permalink":"https://d.oppara.tv/posts/2024/02/check-certificate-using-openssl/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eopenssl を使って証明書の諸々を確認する方法の備忘録。\u003c/p\u003e\n\u003ch2 id=\"証明書のコモンネームと有効開始日有効期限日を確認する\"\u003e証明書のコモンネームと有効開始日・有効期限日を確認する\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% openssl x509 -noout -subject -dates -in oppara.tv.crt\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esubject=CN=oppara.tv\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enotBefore=Jan 31 19:06:53 2024 GMT\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enotAfter=Apr 30 19:06:52 2024 GMT\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"証明書と秘密鍵の整合性を確認する\"\u003e証明書と秘密鍵の「整合性」を確認する\u003c/h2\u003e\n\u003cp\u003eハッシュが同じであれば整合性が取れている。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% openssl x509 -noout -modulus -in oppara.tv.cert | md5sum\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e48f8be8df2822b4f302fc16276566f9e  -\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% openssl rsa -noout -modulus -in oppara.tv.key | md5sum\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e48f8be8df2822b4f302fc16276566f9e  -\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"証明書と中間証明書の整合性を確認する\"\u003e証明書と中間証明書の「整合性」を確認する\u003c/h2\u003e\n\u003cp\u003eハッシュが同じであれば整合性が取れている。\u003c/p\u003e","title":"openssl を使って証明書を確認"},{"content":"はじめに 中括弧（{}）が特徴的な、Intel One Mono を使ってみる。\nインストール % install homebrew/cask-fonts/font-intel-one-mono 環境 % sw_vers ProductName: macOS ProductVersion: 14.2.1 BuildVersion: 23C71 % brew --version Homebrew 4.2.5 ","permalink":"https://d.oppara.tv/posts/2024/01/font-intel-one-mono/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003e中括弧（{}）が特徴的な、\u003ca href=\"https://github.com/intel/intel-one-mono\"\u003eIntel One Mono\u003c/a\u003e を使ってみる。\u003c/p\u003e\n\u003cp\u003e\u003cfigure\u003e\n    \u003cimg loading=\"lazy\" src=\"font.png\"/\u003e \n\u003c/figure\u003e\n\n\u003cfigure\u003e\n    \u003cimg loading=\"lazy\" src=\"typeface.png\"/\u003e \n\u003c/figure\u003e\n\u003c/p\u003e\n\u003ch2 id=\"インストール\"\u003eインストール\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% install homebrew/cask-fonts/font-intel-one-mono \n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% sw_vers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductName:            macOS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductVersion:         14.2.1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuildVersion:           23C71\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% brew --version   \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHomebrew 4.2.5\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Intel One Mono を使う"},{"content":"はじめに AWS CLIからテストメールを送信する方法を備忘録。\n手順 $ to=\u0026#34;test@example.com\u0026#34; $ aws ses send-email \\ --from info@oppara.tv \\ --to \u0026#34;${to}\u0026#34; \\ --subject \u0026#34;件名\u0026#34; \\ --text \u0026#34;本文\u0026#34; 環境 $ aws --version aws-cli/2.15.13 Python/3.11.6 Linux/6.1.66-91.160.amzn2023.x86_64 exec-env/CloudShell exe/x86_64.amzn.2023 prompt/off ","permalink":"https://d.oppara.tv/posts/2024/01/aws-ses-cli-send-email/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eAWS CLIからテストメールを送信する方法を備忘録。\u003c/p\u003e\n\u003ch2 id=\"手順\"\u003e手順\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ to\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;test@example.com\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ aws ses send-email \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --from info@oppara.tv \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --to \u0026#34;${to}\u0026#34; \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --subject \u0026#34;件名\u0026#34; \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  --text \u0026#34;本文\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ aws --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws-cli/2.15.13 Python/3.11.6 Linux/6.1.66-91.160.amzn2023.x86_64 exec-env/CloudShell exe/x86_64.amzn.2023 prompt/off\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"AWS CLIからテストメールを送信"},{"content":"Node.js npx serve port 指定する場合。\nnpx serve -p 1192 serve - npm\nPython python -m http.server 1192 http.server \u0026mdash; HTTP サーバ — Python 3.10.13 ドキュメント\nPHP php -S localhost:1192 PHP: ビルトインウェブサーバー - Manual\nまとめ 静的コンテンツは node で。PHP が絡む場合は php で。\n環境 % node -v v21.5.0 % npx -v 10.2.4 % python --version Python 3.10.6 % php -v PHP 8.3.1 (cli) (built: Dec 20 2023 12:44:38) (NTS) Copyright (c) The PHP Group Zend Engine v4.3.1, Copyright (c) Zend Technologies with Zend OPcache v8.3.1, Copyright (c), by Zend Technologies % sw_vers ProductName: macOS ProductVersion: 14.2.1 BuildVersion: 23C71 ","permalink":"https://d.oppara.tv/posts/2024/01/localserver/","summary":"\u003ch2 id=\"nodejs\"\u003eNode.js\u003c/h2\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003enpx serve\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eport 指定する場合。\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003enpx serve -p 1192\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ca href=\"https://www.npmjs.com/package/serve\"\u003eserve - npm\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"python\"\u003ePython\u003c/h2\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003epython -m http.server 1192\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ca href=\"https://docs.python.org/ja/3.10/library/http.server.html\"\u003ehttp.server \u0026mdash; HTTP サーバ — Python 3.10.13 ドキュメント\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"php\"\u003ePHP\u003c/h2\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003ephp -S localhost:1192\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ca href=\"https://www.php.net/manual/ja/features.commandline.webserver.php\"\u003ePHP: ビルトインウェブサーバー - Manual\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"まとめ\"\u003eまとめ\u003c/h2\u003e\n\u003cp\u003e静的コンテンツは node で。PHP が絡む場合は php で。\u003c/p\u003e","title":"ローカルで Web サーバーを立てる"},{"content":"はじめに マネジメントコンソールで Aurora Serverless V1 を作成できないので、AWS CLI の覚書。\n手順 DATABASE_NAME=\u0026#34;try_db\u0026#34; DB_CLUSTER_IDENTIFIER=\u0026#34;try-cluster\u0026#34; VPC_SECURITY_GROUP_IDS=\u0026#34;sg-016afba3d02181db5\u0026#34; MASTER_USERNAME=\u0026#34;admin\u0026#34; MASTER_USER_PASSWORD=\u0026#34;p4ssw0rd\u0026#34; DB_SUBNET_GROUP_NAME=\u0026#34;try-db-subnet-group\u0026#34; aws rds create-db-cluster \\ --database-name \u0026#34;${DATABASE_NAME}\u0026#34; \\ --db-cluster-identifier \u0026#34;${DB_CLUSTER_IDENTIFIER}\u0026#34; \\ --vpc-security-group-ids \u0026#34;${VPC_SECURITY_GROUP_IDS}\u0026#34; \\ --master-username \u0026#34;${MASTER_USERNAME}\u0026#34; \\ --master-user-password \u0026#34;${MASTER_USER_PASSWORD}\u0026#34; \\ --db-subnet-group-name \u0026#34;${DB_SUBNET_GROUP_NAME}\u0026#34; \\ --availability-zones ap-northeast-1a ap-northeast-1c ap-northeast-1d \\ --engine aurora-mysql \\ --engine-version 5.7.mysql_aurora.2.08.3 \\ --engine-mode serverless \\ --scaling-configuration \u0026#39;{\u0026#34;MinCapacity\u0026#34;:1,\u0026#34;MaxCapacity\u0026#34;:2,\u0026#34;AutoPause\u0026#34;:true,\u0026#34;SecondsUntilAutoPause\u0026#34;:300,\u0026#34;TimeoutAction\u0026#34;:\u0026#34;ForceApplyCapacityChange\u0026#34;,\u0026#34;SecondsBeforeTimeout\u0026#34;:60}\u0026#39; 参考 Aurora Serverless v1 DB クラスターの作成 - Amazon Aurora create-db-cluster — AWS CLI 2.13.38 Command Reference 環境 $ aws --version aws-cli/2.13.35 Python/3.11.6 Linux/6.1.59-84.139.amzn2023.x86_64 exec-env/CloudShell exe/x86_64.amzn.2 prompt/off ","permalink":"https://d.oppara.tv/posts/2023/11/aws-aurora-serverless-v1/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eマネジメントコンソールで Aurora Serverless V1 を作成できないので、AWS CLI の覚書。\u003c/p\u003e\n\u003ch2 id=\"手順\"\u003e手順\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDATABASE_NAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;try_db\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDB_CLUSTER_IDENTIFIER\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;try-cluster\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVPC_SECURITY_GROUP_IDS\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;sg-016afba3d02181db5\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eMASTER_USERNAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;admin\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eMASTER_USER_PASSWORD\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;p4ssw0rd\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDB_SUBNET_GROUP_NAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;try-db-subnet-group\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws rds create-db-cluster  \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --database-name \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eDATABASE_NAME\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --db-cluster-identifier \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eDB_CLUSTER_IDENTIFIER\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --vpc-security-group-ids \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eVPC_SECURITY_GROUP_IDS\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --master-username \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eMASTER_USERNAME\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --master-user-password \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eMASTER_USER_PASSWORD\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --db-subnet-group-name \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eDB_SUBNET_GROUP_NAME\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --availability-zones  ap-northeast-1a ap-northeast-1c ap-northeast-1d \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --engine aurora-mysql \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --engine-version 5.7.mysql_aurora.2.08.3 \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --engine-mode serverless \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --scaling-configuration \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{\u0026#34;MinCapacity\u0026#34;:1,\u0026#34;MaxCapacity\u0026#34;:2,\u0026#34;AutoPause\u0026#34;:true,\u0026#34;SecondsUntilAutoPause\u0026#34;:300,\u0026#34;TimeoutAction\u0026#34;:\u0026#34;ForceApplyCapacityChange\u0026#34;,\u0026#34;SecondsBeforeTimeout\u0026#34;:60}\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"参考\"\u003e参考\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.aws.amazon.com/ja_jp/AmazonRDS/latest/AuroraUserGuide/aurora-serverless.create.html\"\u003eAurora Serverless v1 DB クラスターの作成 - Amazon Aurora\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://awscli.amazonaws.com/v2/documentation/api/latest/reference/rds/create-db-cluster.html\"\u003ecreate-db-cluster — AWS CLI 2.13.38 Command Reference\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ aws --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws-cli/2.13.35 Python/3.11.6 Linux/6.1.59-84.139.amzn2023.x86_64 exec-env/CloudShell exe/x86_64.amzn.2 prompt/off\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"CLI で Aurora Serverless V1 を作成する"},{"content":"対応方法 middleware を使用する。\n// middleware.ts import { NextResponse, NextRequest } from \u0026#39;next/server\u0026#39;; export const config = { // /hoge/ 以下のパスに対して Basic 認証をかける matcher: [\u0026#39;/hoge/:path*\u0026#39;], } export function middleware(req: NextRequest) { const basicAuth = req.headers.get(\u0026#39;authorization\u0026#39;); if (basicAuth) { const authValue = basicAuth.split(\u0026#39; \u0026#39;)[1]; const [user, password] = atob(authValue).split(\u0026#39;:\u0026#39;); if (user === process.env.BASIC_AUTH_USER \u0026amp;\u0026amp; password === process.env.BASIC_AUTH_PASSWORD) { return NextResponse.next(); } } return new NextResponse(\u0026#39;Unauthorized\u0026#39;, { status: 401, headers: { \u0026#39;WWW-Authenticate\u0026#39;: \u0026#39;Basic realm=\u0026#34;Secure Area\u0026#34;\u0026#39;, }, }); }; # .env.local BASIC_AUTH_USER=foo BASIC_AUTH_PASSWORD=bar 環境 % npx next -v Next.js v14.0.3 ","permalink":"https://d.oppara.tv/posts/2023/11/nextjs-basic-auth/","summary":"\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cp\u003emiddleware を使用する。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-typescript:middleware.ts\" data-lang=\"typescript:middleware.ts\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// middleware.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eimport\u003c/span\u003e { \u003cspan style=\"color:#a6e22e\"\u003eNextResponse\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eNextRequest\u003c/span\u003e } \u003cspan style=\"color:#66d9ef\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;next/server\u0026#39;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eexport\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003econfig\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// /hoge/ 以下のパスに対して Basic 認証をかける\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#a6e22e\"\u003ematcher\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e [\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/hoge/:path*\u0026#39;\u003c/span\u003e],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eexport\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emiddleware\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003eNextRequest\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebasicAuth\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eheaders\u003c/span\u003e.\u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;authorization\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003ebasicAuth\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eauthValue\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebasicAuth\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003esplit\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39; \u0026#39;\u003c/span\u003e)[\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e];\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e [\u003cspan style=\"color:#a6e22e\"\u003euser\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003epassword\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eatob\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eauthValue\u003c/span\u003e).\u003cspan style=\"color:#a6e22e\"\u003esplit\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;:\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003euser\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e===\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eprocess\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eenv\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBASIC_AUTH_USER\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003epassword\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e===\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eprocess\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eenv\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBASIC_AUTH_PASSWORD\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eNextResponse\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003enext\u003c/span\u003e();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eNextResponse\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Unauthorized\u0026#39;\u003c/span\u003e, {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003estatus\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003e401\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eheaders\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;WWW-Authenticate\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Basic realm=\u0026#34;Secure Area\u0026#34;\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    },\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  });\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e};\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# .env.local\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBASIC_AUTH_USER\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003efoo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBASIC_AUTH_PASSWORD\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ebar\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% npx next -v\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNext.js v14.0.3\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Next.js で Basic 認証をかける"},{"content":"対応方法 middleware を使用する。\n// middleware.ts import { NextResponse, NextRequest } from \u0026#39;next/server\u0026#39;; const validAddresses = new Set(); if (process.env.VALID_IP_ADDRESSES) { process.env.VALID_IP_ADDRESSES!.split(\u0026#39;,\u0026#39;).forEach((address) =\u0026gt; { validAddresses.add(address.trim()); }) } export function middleware(req: NextRequest) { let ip: string = req.ip ?? req.headers.get(\u0026#39;x-real-ip\u0026#39;) ?? \u0026#39;\u0026#39;; // with CDN or LB or next dev if (!ip \u0026amp;\u0026amp; req.headers.get(\u0026#39;x-forwarded-for\u0026#39;)) { ip = req.headers.get(\u0026#39;x-forwarded-for\u0026#39;)?.split(\u0026#39;,\u0026#39;)[0] ?? \u0026#39;\u0026#39;; } if (!validAddresses.has(ip)) { const tmp = { status: 403, url: req.url, host: req.nextUrl.host, }; console.log(JSON.stringify(tmp)); return new NextResponse(null, { status: 401 }); } return NextResponse.next(); }; # .env.local VALID_IP_ADDRESSES=127.0.0.1,::1 環境 % npx next -v Next.js v14.0.3 ","permalink":"https://d.oppara.tv/posts/2023/11/nextjs-restrict-access-by-ip-address/","summary":"\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cp\u003emiddleware を使用する。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-typescript:middleware.ts\" data-lang=\"typescript:middleware.ts\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// middleware.ts\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eimport\u003c/span\u003e { \u003cspan style=\"color:#a6e22e\"\u003eNextResponse\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eNextRequest\u003c/span\u003e } \u003cspan style=\"color:#66d9ef\"\u003efrom\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;next/server\u0026#39;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003evalidAddresses\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eSet\u003c/span\u003e();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003eprocess\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eenv\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eVALID_IP_ADDRESSES\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eprocess\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eenv\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eVALID_IP_ADDRESSES\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e!\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003esplit\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;,\u0026#39;\u003c/span\u003e).\u003cspan style=\"color:#a6e22e\"\u003eforEach\u003c/span\u003e((\u003cspan style=\"color:#a6e22e\"\u003eaddress\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e=\u0026gt;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003evalidAddresses\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eadd\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eaddress\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003etrim\u003c/span\u003e());\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  })\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eexport\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emiddleware\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003eNextRequest\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003elet\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eip\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eip\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e??\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eheaders\u003c/span\u003e.\u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;x-real-ip\u0026#39;\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e??\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e// with CDN or LB or next dev\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e  \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#f92672\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eip\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eheaders\u003c/span\u003e.\u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;x-forwarded-for\u0026#39;\u003c/span\u003e)) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eip\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ereq\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eheaders\u003c/span\u003e.\u003cspan style=\"color:#66d9ef\"\u003eget\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;x-forwarded-for\u0026#39;\u003c/span\u003e)\u003cspan style=\"color:#f92672\"\u003e?\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003esplit\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;,\u0026#39;\u003c/span\u003e)[\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e??\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#f92672\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003evalidAddresses\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ehas\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eip\u003c/span\u003e)) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003econst\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003etmp\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#a6e22e\"\u003estatus\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003e403\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#a6e22e\"\u003eurl\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003ereq.url\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#a6e22e\"\u003ehost\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003ereq.nextUrl.host\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    };\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003econsole\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003elog\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eJSON\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003estringify\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003etmp\u003c/span\u003e));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enew\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eNextResponse\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003enull\u003c/span\u003e, { \u003cspan style=\"color:#a6e22e\"\u003estatus\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003e401\u003c/span\u003e });\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eNextResponse\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003enext\u003c/span\u003e();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e};\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# .env.local\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVALID_IP_ADDRESSES\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e127.0.0.1,::1\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% npx next -v\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNext.js v14.0.3\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Next.js で IP アドレスを使用したアクセス制限を行う"},{"content":"はじめに ログローテートの dry-run、実行方法についての覚書。\nUsage dry-run 実行\nlogrotate -d /etc/logrotate.conf 実行\nlogrotate -f /etc/logrotate.conf 設定ファイルを指定して実行\nlogrotate -f /etc/logrotate.d/httpd ","permalink":"https://d.oppara.tv/posts/2023/11/logrotate/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eログローテートの dry-run、実行方法についての覚書。\u003c/p\u003e\n\u003ch2 id=\"usage\"\u003eUsage\u003c/h2\u003e\n\u003cp\u003edry-run 実行\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elogrotate -d /etc/logrotate.conf\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e実行\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elogrotate -f /etc/logrotate.conf\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e設定ファイルを指定して実行\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elogrotate -f /etc/logrotate.d/httpd\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"ログローテートの覚書"},{"content":"はじめに textlint の dry-run をよく忘れるので覚書。 そもそもデフォルトが dry-run だった。\nUsage npx textlint /path/to/target キャッシュなし、設定ファイル指定の場合。\nnpx textlint --no-cache -c /path/to/textlintrc /path/to/target 自動修正時の場合。\nnpx textlint --dry-run --fix /path/to/target 環境 % npx textlint --version v13.3.3 % sw_vers ProductName:\tmacOS ProductVersion:\t14.0 BuildVersion:\t23A344 ","permalink":"https://d.oppara.tv/posts/2023/10/textlint-dryrun/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://textlint.github.io/\"\u003etextlint\u003c/a\u003e の dry-run をよく忘れるので覚書。\nそもそもデフォルトが dry-run だった。\u003c/p\u003e\n\u003ch2 id=\"usage\"\u003eUsage\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enpx textlint /path/to/target\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eキャッシュなし、設定ファイル指定の場合。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enpx textlint --no-cache -c /path/to/textlintrc /path/to/target\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e自動修正時の場合。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003enpx textlint --dry-run --fix /path/to/target\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% npx textlint --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ev13.3.3\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% sw_vers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductName:\t\tmacOS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductVersion:\t\t14.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuildVersion:\t\t23A344\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"textlint で dry run"},{"content":"はじめに 便利そうなので使ってみる。\norangekame3/stree: 📁Directory trees of AWS S3 Bucket stree：S3バケットをtreeするCLIコマンド | フューチャー技術ブログ インストール Homebrew でインストールする。\n% brew install orangekame3/tap/stree ちょい、はまる。 % stree my-bucket ignoring argument my-bucket (path check I) No Git or Mercurial URLs found in arguments or current working path, see stree --help は？\n% which stree /opt/homebrew/bin/stree % ll /opt/homebrew/bin | grep stree lrwxr-xr-x 1 oppara admin 53B Oct 28 2022 stree -\u0026gt; /Applications/Sourcetree.app/Contents/Resources/stree Sourcetree の CLI がインストールされていたので削除する。\n% rm /opt/homebrew/bin/stree 設定 config と credentials をよしなに設定する。\n~/.aws/config\n[oppara] region = ap-northeast-1 output = json ~/.aws/credentials\n[oppara] aws_access_key_id = XXXXXXXXXXXXXXXXXXXXX aws_secret_access_key = XXXXXXXXXXXXXXXXX 実行 % stree opp-my-bucket --profile oppara --no-color opp-my-bucket ├── foo │ └── bar │ └── baz.toml └── hoge.md 2 directories, 2 files 環境 % sw_vers ProductName:\tmacOS ProductVersion:\t14.0 BuildVersion:\t23A344 ","permalink":"https://d.oppara.tv/posts/2023/10/aws-s3-stree/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003e便利そうなので使ってみる。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/orangekame3/stree\"\u003eorangekame3/stree: 📁Directory trees of AWS S3 Bucket\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://future-architect.github.io/articles/20230926a/\"\u003estree：S3バケットをtreeするCLIコマンド | フューチャー技術ブログ\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"インストール\"\u003eインストール\u003c/h2\u003e\n\u003cp\u003eHomebrew でインストールする。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% brew install orangekame3/tap/stree\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"ちょいはまる\"\u003eちょい、はまる。\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% stree my-bucket\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eignoring argument my-bucket (path check I)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNo Git or Mercurial URLs found in arguments or current working path, see stree --help\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eは？\u003c/p\u003e","title":"stree を使ってみる"},{"content":"はじめに 簡易敵な Usage 表示\n実装 #!/usr/bin/env bash #/ Usage: #/ awsome-script [-h | -help] \u0026lt;name\u0026gt; [\u0026lt;count\u0026gt;] #/ #/ Example #/ awsome-script foo #/ awsome-script foo 3 #/ set -e usage () { grep \u0026#39;^#/\u0026#39; \u0026lt; \u0026#34;$0\u0026#34; | cut -c4- exit 0 } if [ \u0026#34;$1\u0026#34; = \u0026#34;--help\u0026#34; ] || [ \u0026#34;$1\u0026#34; = \u0026#34;-h\u0026#34; ]; then usage fi NAME=$1 COUNT=${2:-0} echo \u0026#34;$NAME\u0026#34; \u0026#34;$COUNT\u0026#34; 実行 % /path/to/awsome-script -h Usage: awsome-script [-h | -help] \u0026lt;name\u0026gt; [\u0026lt;count\u0026gt;] Example awsome-script foo awsome-script foo 3 % /path/to/awsome-script foo foo 0 ","permalink":"https://d.oppara.tv/posts/2023/10/shellscript-usage/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003e簡易敵な Usage 表示\u003c/p\u003e\n\u003ch2 id=\"実装\"\u003e実装\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/usr/bin/env bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#/ Usage:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#/     awsome-script [-h | -help] \u0026lt;name\u0026gt; [\u0026lt;count\u0026gt;]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#/\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#/ Example\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#/     awsome-script foo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#/     awsome-script foo 3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#/\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eset -e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eusage \u003cspan style=\"color:#f92672\"\u003e()\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  grep \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;^#/\u0026#39;\u003c/span\u003e \u0026lt; \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$0\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e | cut -c4-\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  exit \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$1\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;--help\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e||\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$1\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;-h\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  usage\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e$1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCOUNT\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003e2\u003cspan style=\"color:#66d9ef\"\u003e:-\u003c/span\u003e0\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$NAME\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$COUNT\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"実行\"\u003e実行\u003c/h2\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e% /path/to/awsome-script -h \nUsage:\n    awsome-script [-h | -help] \u0026lt;name\u0026gt; [\u0026lt;count\u0026gt;]\n\nExample\n    awsome-script foo\n    awsome-script foo 3\n\n% /path/to/awsome-script foo\nfoo 0\n\u003c/code\u003e\u003c/pre\u003e","title":"シェルスクリプトで Usage 表示"},{"content":"主要な項目の説明 myhostname：DNS で正引きできる（A レコードが存在する）ホスト名。\nDNS 正引きの IP アドレスと、Postfix を設定するサーバの IP アドレスが一致する必要はない！ mydomain：ドメイン名を FQDN で指定 myorigin：アプリケーションからのメール送信時に From アドレスのドメインとして使用する名前 最終的に、myorigin に設定するドメインに、逆引き、SPF レコードの設定が必要。\n設定例 myhostname = mail01.example.com mydomain = example.com myorigin = $mydomain mydestination = コマンド main.cf の確認 # postfix check 再起動 # service postfix restart ","permalink":"https://d.oppara.tv/posts/2023/10/postfix-setting/","summary":"\u003ch2 id=\"主要な項目の説明\"\u003e主要な項目の説明\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003emyhostname：DNS で正引きできる（A レコードが存在する）ホスト名。\u003cbr\u003e\nDNS 正引きの IP アドレスと、Postfix を設定するサーバの IP アドレスが一致する必要はない！\u003c/li\u003e\n\u003cli\u003emydomain：ドメイン名を FQDN で指定\u003c/li\u003e\n\u003cli\u003emyorigin：アプリケーションからのメール送信時に From アドレスのドメインとして使用する名前\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e最終的に、myorigin に設定するドメインに、逆引き、SPF レコードの設定が必要。\u003c/p\u003e","title":"Postfix 覚書"},{"content":"www ありの https のURLに統一 RewriteEngine on RewriteCond %{HTTPS} off RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] RewriteCond %{HTTP_HOST} !^www\\. [NC] RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] www なしの https のURLに統一 RewriteEngine on RewriteCond %{HTTPS} off RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] RewriteCond %{HTTP_HOST} ^www\\.(.*) [NC] RewriteRule ^ http://%1%{REQUEST_URI} [L,R=301] ","permalink":"https://d.oppara.tv/posts/2023/09/rewrite-rule-www/","summary":"\u003ch2 id=\"www-ありの-https-のurlに統一\"\u003ewww ありの https のURLに統一\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-apache\" data-lang=\"apache\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRewriteEngine \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRewriteCond %{HTTPS} \u003cspan style=\"color:#66d9ef\"\u003eoff\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRewriteCond %{HTTP_HOST} !^www\\. [NC]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"www-なしの-https-のurlに統一\"\u003ewww なしの https のURLに統一\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-apache\" data-lang=\"apache\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRewriteEngine \u003cspan style=\"color:#66d9ef\"\u003eon\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRewriteCond %{HTTPS} \u003cspan style=\"color:#66d9ef\"\u003eoff\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRewriteCond %{HTTP_HOST} ^www\\.(.*) [NC]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eRewriteRule ^ http://%1%{REQUEST_URI} [L,R=301]\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"www ありなしの RewiteRule"},{"content":"目的 WordPress の管理画面で独自プラグインの URL を取得したい。\n対応方法 funtcion getPluginUrl() { return admin_url(\u0026#39;admin.php?page=\u0026#39; . プラグインのスラッグ); } ","permalink":"https://d.oppara.tv/posts/2023/07/wp-admin-plugin-url/","summary":"\u003ch2 id=\"目的\"\u003e目的\u003c/h2\u003e\n\u003cp\u003eWordPress の管理画面で独自プラグインの URL を取得したい。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-php\" data-lang=\"php\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003efuntcion\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003egetPluginUrl\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eadmin_url\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;admin.php?page=\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eプラグインのスラッグ\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"WordPress の管理画面でプラグインの URL を取得する"},{"content":"問題 WordPress でスラッグにスラッシュを含ませられない。\nスラッシュがハイフンに変換されてしまう。。。\n対応方法 sanitize_title_with_dashes という関数でフィルタしてるので削除する。\nただし、フィルタを削除すると、URI エンコード されなくなるので自前でエンコードする。\nremove_filter(\u0026#39;sanitize_title\u0026#39;, \u0026#39;sanitize_title_with_dashes\u0026#39;); // URI エンコードを行う add_filter(\u0026#39;sanitize_title\u0026#39;, function ($title) { if (seems_utf8($title)) { if (function_exists(\u0026#39;mb_strtolower\u0026#39;)) { $title = mb_strtolower($title, \u0026#39;UTF-8\u0026#39;); } $title = utf8_uri_encode($title, 200); } return $title; }); ","permalink":"https://d.oppara.tv/posts/2023/05/wp-slug-with-slash/","summary":"\u003ch2 id=\"問題\"\u003e問題\u003c/h2\u003e\n\u003cp\u003eWordPress でスラッグにスラッシュを含ませられない。\u003cbr\u003e\nスラッシュがハイフンに変換されてしまう。。。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/WordPress/WordPress/blob/6.2.2/wp-includes/formatting.php#L2258\"\u003esanitize_title_with_dashes\u003c/a\u003e という関数でフィルタしてるので削除する。\u003c/p\u003e\n\u003cp\u003eただし、フィルタを削除すると、\u003ca href=\"https://github.com/WordPress/WordPress/blob/6.2.2/wp-includes/formatting.php#L2267-L2272\"\u003eURI エンコード\u003c/a\u003e されなくなるので自前でエンコードする。\u003c/p\u003e","title":"WordPress でスラッグにスラッシュを含ませたい"},{"content":"問題 自分で作成したテーマを使用した場合、サイドメニュー -\u0026gt; 外観メニュー内に「メニュー」が表示されない。\n対応方法 add_action(\u0026#39;after_setup_theme\u0026#39;, function(): void { register_nav_menu(\u0026#39;primary\u0026#39;, __(\u0026#39;Primary Menu\u0026#39;, \u0026#39;theme-slug\u0026#39;)); }); ","permalink":"https://d.oppara.tv/posts/2023/05/wp-themes-menu/","summary":"\u003ch2 id=\"問題\"\u003e問題\u003c/h2\u003e\n\u003cp\u003e自分で作成したテーマを使用した場合、サイドメニュー -\u0026gt; 外観メニュー内に「メニュー」が表示されない。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-php\" data-lang=\"php\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eadd_action\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;after_setup_theme\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e()\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003evoid\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003eregister_nav_menu\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;primary\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003e__\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Primary Menu\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;theme-slug\u0026#39;\u003c/span\u003e));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e});\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"WordPress で外観メニュー内に「メニュー」表示されない件"},{"content":"目的 よく忘れるので備忘録。\nよく使うのは ##*/, %/*\nパターン パターン 説明 ${var#pattern} var の先頭から pattern の最短一致を削除する。 ${var##pattern} var の先頭から pattern の最長一致を削除する。 ${var%pattern} var の末尾から pattern の最短一致を削除する。 ${var%%pattern} var の末尾から pattern の最長一致を削除する。 #!/bin/sh path=\u0026#34;/etc/httpd/httpd.conf\u0026#34; # ファイル名 echo ${path##*/} # ディレクトリ名 echo ${path%/*} # 拡張子を除いたファイル名 echo ${path%.*} # 拡張子 echo ${path##*.} ","permalink":"https://d.oppara.tv/posts/2023/05/shellscript-dirname-filename/","summary":"\u003ch2 id=\"目的\"\u003e目的\u003c/h2\u003e\n\u003cp\u003eよく忘れるので備忘録。\u003c/p\u003e\n\u003cp\u003eよく使うのは \u003ccode\u003e##*/\u003c/code\u003e, \u003ccode\u003e%/*\u003c/code\u003e\u003c/p\u003e\n\u003ch2 id=\"パターン\"\u003eパターン\u003c/h2\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eパターン\u003c/th\u003e\n          \u003cth\u003e説明\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e${var#pattern}\u003c/td\u003e\n          \u003ctd\u003evar の先頭から pattern の最短一致を削除する。\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e${var##pattern}\u003c/td\u003e\n          \u003ctd\u003evar の先頭から pattern の最長一致を削除する。\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e${var%pattern}\u003c/td\u003e\n          \u003ctd\u003evar の末尾から pattern の最短一致を削除する。\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e${var%%pattern}\u003c/td\u003e\n          \u003ctd\u003evar の末尾から pattern の最長一致を削除する。\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/sh\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003epath\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/etc/httpd/httpd.conf\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ファイル名\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003epath##*/\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# ディレクトリ名\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003epath%/*\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 拡張子を除いたファイル名\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003epath%.*\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 拡張子\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003epath##*.\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"シェルスクリプトでディレクトリ名やファイル名を取得したい"},{"content":"目的 Neovim を使いたい。\n対応方法 Homebrew でインストールする。\nbrew install neovim 開発バージョンをインストールする。\nbrew install --HEAD neovim 開発バージョンをアップデートする。\nbrew upgrade neovim --fetch-HEAD 参考サイト Installing Neovim · neovim/neovim Wiki 環境 % nvim --version NVIM v0.9.0 Build type: Release LuaJIT 2.1.0-beta3 % sw_vers ProductName: macOS ProductVersion: 13.3 BuildVersion: 22E252 ","permalink":"https://d.oppara.tv/posts/2023/04/neovim-install/","summary":"\u003ch2 id=\"目的\"\u003e目的\u003c/h2\u003e\n\u003cp\u003eNeovim を使いたい。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://brew.sh/\"\u003eHomebrew\u003c/a\u003e でインストールする。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebrew install neovim\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e開発バージョンをインストールする。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebrew install --HEAD neovim\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e開発バージョンをアップデートする。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebrew upgrade neovim --fetch-HEAD\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"参考サイト\"\u003e参考サイト\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/neovim/neovim/wiki/Installing-Neovim#macos--os-x\"\u003eInstalling Neovim · neovim/neovim Wiki\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% nvim --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNVIM v0.9.0\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuild type: Release\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eLuaJIT 2.1.0-beta3\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% sw_vers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductName:            macOS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductVersion:         13.3\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuildVersion:           22E252\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Neovim のインストール"},{"content":"はじめに XDG_ほにゃららの環境変数のデフォルト値を忘れてしまうのでまとめ。\nまとめ XDG_CONFIG_HOME ユーザー個別の設定が書き込まれるディレクトリ。\necho \u0026#34;${XDG_CONFIG_HOME:-$HOME/.config}\u0026#34; XDG_DATA_HOME ユーザー個別のデータファイルが書き込まれるディレクトリ。\necho \u0026#34;${XDG_DATA_HOME:-$HOME/.share}\u0026#34; XDG_STATE_HOME ユーザー個別の状態ファイルをが書き込まれるディレクトリ。\necho \u0026#34;${XDG_STATE_HOME:-$HOME/.state}\u0026#34; XDG_CACHE_HOME ユーザー個別の重要でない (キャッシュ) データが書き込まれるディレクトリ。\necho \u0026#34;${XDG_CACHE_HOME:-$HOME/.cache}\u0026#34; 参考サイト XDG Base Directory - ArchWiki ","permalink":"https://d.oppara.tv/posts/2023/04/xdg-base-directory/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eXDG_ほにゃららの環境変数のデフォルト値を忘れてしまうのでまとめ。\u003c/p\u003e\n\u003ch2 id=\"まとめ\"\u003eまとめ\u003c/h2\u003e\n\u003ch3 id=\"xdg_config_home\"\u003eXDG_CONFIG_HOME\u003c/h3\u003e\n\u003cp\u003eユーザー個別の設定が書き込まれるディレクトリ。\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eecho \u0026#34;${XDG_CONFIG_HOME:-$HOME/.config}\u0026#34;\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"xdg_data_home\"\u003eXDG_DATA_HOME\u003c/h3\u003e\n\u003cp\u003eユーザー個別のデータファイルが書き込まれるディレクトリ。\u003c/p\u003e","title":"XDG Base Directory のデフォルト値まとめ"},{"content":"目的 GitLab に登録している公開鍵を手軽に取得したい。\n対応方法 GitLab のユーザーページの URL の後ろに .keys をつける。\n例 GitLab のホスト: gitlab.oppara.tv ユーザー名: oppara % curl https://gitlab.oppara.tv/oppara.keys 参考サイト GitHub に登録した SSH 公開鍵は全世界に公開されている | 774::Blog % curl https://github.com/oppara.keys ","permalink":"https://d.oppara.tv/posts/2022/10/gitlab-pubkey/","summary":"\u003ch2 id=\"目的\"\u003e目的\u003c/h2\u003e\n\u003cp\u003eGitLab に登録している公開鍵を手軽に取得したい。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cp\u003eGitLab のユーザーページの URL の後ろに \u003ccode\u003e.keys\u003c/code\u003e をつける。\u003c/p\u003e\n\u003ch3 id=\"例\"\u003e例\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eGitLab のホスト: gitlab.oppara.tv\u003c/li\u003e\n\u003cli\u003eユーザー名: oppara\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e% curl https://gitlab.oppara.tv/oppara.keys\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"参考サイト\"\u003e参考サイト\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://blog.id774.net/entry/2013/12/16/441/\"\u003eGitHub に登録した SSH 公開鍵は全世界に公開されている | 774::Blog\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e% curl https://github.com/oppara.keys\n\u003c/code\u003e\u003c/pre\u003e","title":"GitLab に登録している公開鍵を取得したい"},{"content":"目的 C++入門 AtCoder Programming Guide for beginners (APG4b) の解答を Mac 上で確認したい。\n対応方法 以下のファイルを作成して\n~/apg4b/include/bits/stdc++.h\n#include \u0026lt;iostream\u0026gt; // cout, endl, cin #include \u0026lt;string\u0026gt; // string, to_string, stoi #include \u0026lt;vector\u0026gt; // vector #include \u0026lt;algorithm\u0026gt; // min, max, swap, sort, reverse, lower_bound, upper_bound #include \u0026lt;utility\u0026gt; // pair, make_pair #include \u0026lt;tuple\u0026gt; // tuple, make_tuple #include \u0026lt;cstdint\u0026gt; // int64_t, int*_t #include \u0026lt;cstdio\u0026gt; // printf #include \u0026lt;map\u0026gt; // map #include \u0026lt;queue\u0026gt; // queue, priority_queue #include \u0026lt;set\u0026gt; // set #include \u0026lt;stack\u0026gt; // stack #include \u0026lt;deque\u0026gt; // deque #include \u0026lt;unordered_map\u0026gt; // unordered_map #include \u0026lt;unordered_set\u0026gt; // unordered_set #include \u0026lt;bitset\u0026gt; // bitset #include \u0026lt;cctype\u0026gt; // isupper, islower, isdigit, toupper, tolower パスに追加しておく。\nexport CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:${HOME}/apg4b/include/ 実行 quickrun で実行！\n参考サイト 手元のコンピュータでプログラムを書きたい場合 環境 % sw_vers ProductName: macOS ProductVersion: 12.4 BuildVersion: 21F79 % clang --version Apple clang version 13.1.6 (clang-1316.0.21.2.5) Target: arm64-apple-darwin21.5.0 Thread model: posix InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin ","permalink":"https://d.oppara.tv/posts/2022/09/apgb-mac/","summary":"\u003ch2 id=\"目的\"\u003e目的\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://atcoder.jp/contests/apg4b\"\u003eC++入門 AtCoder Programming Guide for beginners (APG4b)\u003c/a\u003e の解答を Mac 上で確認したい。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cp\u003e以下のファイルを作成して\u003cbr\u003e\n~/apg4b/include/bits/stdc++.h\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;iostream\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// cout, endl, cin\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;string\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// string, to_string, stoi\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;vector\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// vector\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;algorithm\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// min, max, swap, sort, reverse, lower_bound, upper_bound\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;utility\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// pair, make_pair\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;tuple\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// tuple, make_tuple\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;cstdint\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// int64_t, int*_t\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;cstdio\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// printf\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;map\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// map\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;queue\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// queue, priority_queue\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;set\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// set\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;stack\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// stack\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;deque\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// deque\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;unordered_map\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// unordered_map\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;unordered_set\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// unordered_set\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;bitset\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// bitset\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e \u003cspan style=\"color:#75715e\"\u003e\u0026lt;cctype\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e \u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e// isupper, islower, isdigit, toupper, tolower\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eパスに追加しておく。\u003c/p\u003e","title":"APG4b を Mac  上で確認したい"},{"content":"問題 Mac で会社の VPN 設定をしても、IP アドレスが会社のものに切り替わらない。\n対応方法 「システム環境設定」 -\u0026gt; 「ネットワーク」で設定した VPN 設定の [詳細\u0026hellip;] ボタンをクリック 「オプション」タブ内の「すべてのトラフィックを VPN 接続経由で送信」をチェック 環境 % sw_vers ProductName: macOS ProductVersion: 12.4 BuildVersion: 21F79 ","permalink":"https://d.oppara.tv/posts/2022/09/mac-vpn/","summary":"\u003ch2 id=\"問題\"\u003e問題\u003c/h2\u003e\n\u003cp\u003eMac で会社の VPN 設定をしても、IP アドレスが会社のものに切り替わらない。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e「システム環境設定」 -\u0026gt; 「ネットワーク」で設定した VPN 設定の [詳細\u0026hellip;] ボタンをクリック\u003c/li\u003e\n\u003cli\u003e「オプション」タブ内の「すべてのトラフィックを VPN 接続経由で送信」をチェック\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/posts/2022/09/mac-vpn/vpn.png\"\u003e\u003c/p\u003e","title":"VPN 接続しても IP アドレスが変わらない件"},{"content":"やり方 aws-vault を利用し、EC2 のセキュリティスキャンを行う場合。\n% aws-vault exec opp-dev -- trivy aws --service ec2 ヘルプ % trivy aws --help 参考サイト TrivyでAWSアカウントのセキュリティスキャンができるようになりました | DevelopersIO 環境 % sw_vers ProductName: macOS ProductVersion: 12.4 BuildVersion: 21F79 % trivy --version Version: 0.31.2 ","permalink":"https://d.oppara.tv/posts/2022/08/aws-trivy/","summary":"\u003ch2 id=\"やり方\"\u003eやり方\u003c/h2\u003e\n\u003cp\u003eaws-vault を利用し、EC2 のセキュリティスキャンを行う場合。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% aws-vault exec opp-dev -- trivy aws --service ec2\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"ヘルプ\"\u003eヘルプ\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% trivy aws --help\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"参考サイト\"\u003e参考サイト\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://dev.classmethod.jp/articles/aws-security-scan-by-trivy/\"\u003eTrivyでAWSアカウントのセキュリティスキャンができるようになりました | DevelopersIO\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% sw_vers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductName:    macOS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductVersion: 12.4\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuildVersion:   21F79\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% trivy --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVersion: 0.31.2\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Trivy で AWS のセキュリティスキャンを行う"},{"content":"目的 DynamoDB をローカル環境で使いたい。\n対応方法 DynamoDB ローカルを Docker で動かす\nversion: \u0026#39;3.8\u0026#39; services: dynamodb-local: command: \u0026#34;-jar DynamoDBLocal.jar -sharedDb -dbPath ./data\u0026#34; image: \u0026#34;amazon/dynamodb-local:latest\u0026#34; container_name: dynamodb-local ports: - \u0026#34;8888:8000\u0026#34; volumes: - \u0026#34;./docker/dynamodb:/home/dynamodblocal/data\u0026#34; working_dir: /home/dynamodblocal 起動 % docker-compose up -d テーブルを作成してみる % export AWS_DEFAULT_REGION=us-west-2 % export ENDPOINT=\u0026#34;http://localhost:8888\u0026#34; % aws dynamodb create-table \\ --table-name sessions \\ --endpoint-url \u0026#34;${ENDPOINT}\u0026#34; \\ --attribute-definitions \\ AttributeName=id,AttributeType=S \\ --key-schema \\ AttributeName=id,KeyType=HASH \\ --billing-mode PAY_PER_REQUEST \\ --table-class STANDARD 環境 % sw_vers ProductName: macOS ProductVersion: 12.4 BuildVersion: 21F79 ","permalink":"https://d.oppara.tv/posts/2022/06/aws-dynamodb-local/","summary":"\u003ch2 id=\"目的\"\u003e目的\u003c/h2\u003e\n\u003cp\u003eDynamoDB をローカル環境で使いたい。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/DynamoDBLocal.DownloadingAndRunning.html#docker\"\u003eDynamoDB ローカルを Docker で動かす\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml:docker-compose.yaml\" data-lang=\"yaml:docker-compose.yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;3.8\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003edynamodb-local\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003ecommand\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;-jar DynamoDBLocal.jar -sharedDb -dbPath ./data\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;amazon/dynamodb-local:latest\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003edynamodb-local\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;8888:8000\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;./docker/dynamodb:/home/dynamodblocal/data\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eworking_dir\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e/home/dynamodblocal\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"起動\"\u003e起動\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% docker-compose up -d\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"テーブルを作成してみる\"\u003eテーブルを作成してみる\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% export AWS_DEFAULT_REGION\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eus-west-2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% export ENDPOINT\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;http://localhost:8888\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% aws dynamodb create-table \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e    --table-name sessions \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    --endpoint-url \u0026#34;${ENDPOINT}\u0026#34; \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    --attribute-definitions \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        AttributeName=id,AttributeType=S \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    --key-schema \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        AttributeName=id,KeyType=HASH \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    --billing-mode PAY_PER_REQUEST \\\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    --table-class STANDARD\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% sw_vers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductName:    macOS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductVersion: 12.4\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuildVersion:   21F79\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"DynamoDB をローカル環境で使いたい"},{"content":"はじめに Wrangler（Workers CLI）を使って Cloudflare Workers を試してみる。\nWrangler のインストール % npm install -g wrangler Cloudflare の認証 2 段階認証にもたもたしてたらタイムアウトしてしまった。\n% wrangler login ⛅️ wrangler 2.0.5 ------------------- Attempting to login via OAuth... ✘ [ERROR] Timed out waiting for authorization code, please try again. もう一度。\n% wrangler login ⛅️ wrangler 2.0.5 ------------------- Attempting to login via OAuth... ブラウザが起動し、ログイン、2 段階認証を通過すると以下の画面になるので、問題なければ[Allow]をクリック。 承認。 プロジェクトの作成 % wrangler init my-worker -y 中身確認。\n% ls -1F my-worker node_modules/ package-lock.json package.json src/ tsconfig.json wrangler.toml % cat my-worker/src/index.ts /** * Welcome to Cloudflare Workers! This is your first worker. * * - Run `wrangler dev src/index.ts` in your terminal to start a development server * - Open a browser tab at http://localhost:8787/ to see your worker in action * - Run `wrangler publish src/index.ts --name my-worker` to publish your worker * * Learn more at https://developers.cloudflare.com/workers/ */ export default { async fetch(request: Request): Promise\u0026lt;Response\u0026gt; { return new Response(\u0026#34;Hello World!\u0026#34;); }, }; ローカルで実行 % cd my-worker % wrangler dev # または npm start \u0026gt; my-worker@0.0.0 start \u0026gt; wrangler dev ⛅️ wrangler 2.0.5 ------------------- ⬣ Listening at http://localhost:59598 ╭────────────────────────────────────────────╮ │ [b] open a browser, [d] open Devtools, [l] turn off local mode, [c] clear console, [x] to exit │ ╰────────────────────────────────────────────╯ デプロイ % wrangler publish # または npm run publish ⛅️ wrangler 2.0.5 ------------------- Uploaded my-worker (0.61 sec) Published my-worker (3.61 sec) my-worker.oppara.workers.dev 動作確認 % curl https://my-worker.oppara.workers.dev Hello World! ログが見れる。\n% wrangler tail ⛅️ wrangler 2.0.5 ------------------- Successfully created tail, expires at 2022-05-17T20:19:21Z Connected to my-worker, waiting for logs... GET https://my-worker.oppara.workers.dev/ - Ok @ 5/17/2022, 11:19:47 PM 参考サイト Wrangler (command line) · Cloudflare Workers docs Get started guide · Cloudflare Workers docs 環境 % wrangler --version 2.0.5 % sw_vers ProductName: macOS ProductVersion: 12.3.1 BuildVersion: 21E258 ","permalink":"https://d.oppara.tv/posts/2022/05/wrangler-cloudflare-workers/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://developers.cloudflare.com/workers/wrangler/\"\u003eWrangler（Workers CLI）\u003c/a\u003eを使って \u003ca href=\"https://developers.cloudflare.com/workers/\"\u003eCloudflare Workers\u003c/a\u003e を試してみる。\u003c/p\u003e\n\u003ch2 id=\"wrangler-のインストール\"\u003eWrangler のインストール\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% npm install -g wrangler\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"cloudflare-の認証\"\u003eCloudflare の認証\u003c/h2\u003e\n\u003cp\u003e2 段階認証にもたもたしてたらタイムアウトしてしまった。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% wrangler login\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e ⛅️ wrangler 2.0.5\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e-------------------\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAttempting to login via OAuth...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e✘ [ERROR] Timed out waiting for authorization code, please try again.\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eもう一度。\u003c/p\u003e","title":"Wrangler で Cloudflare Workers"},{"content":"問題 npx 実行時にyとたたくのが面倒、もしくはたたくこと自体を忘れてしまう。\n% npx cowsay foo Need to install the following packages: cowsay Ok to proceed? (y) 対応方法 --yesをつける。(キャッシュを有効にする?)\n% npx --yes cowsay foo _____ \u0026lt; foo \u0026gt; ----- \\ ^__^ \\ (oo)\\_______ (__)\\ )\\/\\ ||----w | || || 以後、--yesをつけなくてもOk to proceed? (y)は表示されない。\n% npx cowsay foo _____ \u0026lt; foo \u0026gt; ----- \\ ^__^ \\ (oo)\\_______ (__)\\ )\\/\\ ||----w | || || キャッシュをクリアすると、Ok to proceed? (y)が復活する。\n% npx --yes clear-npx-cache % npx cowsay foo Need to install the following packages: cowsay Ok to proceed? (y) _____ \u0026lt; foo \u0026gt; ----- \\ ^__^ \\ (oo)\\_______ (__)\\ )\\/\\ ||----w | || || まとめ --yes 5 文字か、y 1 文字か\u0026hellip;\n参考サイト npx | npm Docs 環境 % npm --version 8.6.0 ","permalink":"https://d.oppara.tv/posts/2022/05/npx-not-show-ok-to-proceed/","summary":"\u003ch2 id=\"問題\"\u003e問題\u003c/h2\u003e\n\u003cp\u003enpx 実行時に\u003ccode\u003ey\u003c/code\u003eとたたくのが面倒、もしくはたたくこと自体を忘れてしまう。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% npx cowsay foo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNeed to install the following packages:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  cowsay\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eOk to proceed? (y)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e--yes\u003c/code\u003eをつける。(キャッシュを有効にする?)\u003c/p\u003e","title":"npx 実行時に Ok to proceed? (y) と表示させない"},{"content":"目的 Brewfile コメント付きで上書きしたい。\nやり方 % brew bundle dump --force --describe ヘルプ表示 % brew bundle --help 環境 % brew --version Homebrew 3.4.8-11-g96e8796 Homebrew/homebrew-core (git revision 44fc63c8cca; last commit 2022-04-25) Homebrew/homebrew-cask (git revision 659584ba8c; last commit 2022-04-26) % sw_vers ProductName: macOS ProductVersion: 12.3.1 BuildVersion: 21E258 ","permalink":"https://d.oppara.tv/posts/2022/04/brew-bundle-dump/","summary":"\u003ch2 id=\"目的\"\u003e目的\u003c/h2\u003e\n\u003cp\u003eBrewfile コメント付きで上書きしたい。\u003c/p\u003e\n\u003ch2 id=\"やり方\"\u003eやり方\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% brew bundle dump --force --describe\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"ヘルプ表示\"\u003eヘルプ表示\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% brew bundle --help\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% brew --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHomebrew 3.4.8-11-g96e8796\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHomebrew/homebrew-core (git revision 44fc63c8cca; last commit 2022-04-25)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHomebrew/homebrew-cask (git revision 659584ba8c; last commit 2022-04-26)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% sw_vers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductName:    macOS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductVersion: 12.3.1\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuildVersion:   21E258\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Brewfile を上書きしたい"},{"content":"はじめに マネコンからの再インポートが面倒くさかったので備忘録。\n対応方法 シェルスクリプトから実行する。\n#!/bin/bash set -eu # インポートする証明書の ARN ARN=\u0026#34;arn:aws:acm:region:123456789012:certificate/12345678-1234-1234-1234-12345678901\t\u0026#34; # 証明書ファイルへのパス CRT=\u0026#34;Certificate.pem\u0026#34; # 中間証明書ファイルへのパス CC=\u0026#34;CertificateChain.pem\u0026#34; # パスワード無しの秘密鍵へのパス KEY=\u0026#34;PrivateKey.pem\u0026#34; # リージョン REGION=\u0026#34;us-east-1\u0026#34; aws acm import-certificate \\ --certificate fileb://\u0026#34;${CRT}\u0026#34; \\ --certificate-chain fileb://\u0026#34;${CC}\u0026#34; \\ --private-key fileb://\u0026#34;${KEY}\u0026#34; \\ --certificate-arn \u0026#34;${ARN}\u0026#34; \\ --region \u0026#34;${REGION}\u0026#34; 参考サイト 証明書を再インポートする - AWS Certificate Manager import-certificate — AWS CLI 2.5.8 Command Reference 環境 % aws --version aws-cli/2.5.8 Python/3.9.12 Darwin/21.4.0 source/x86_64 prompt/off ","permalink":"https://d.oppara.tv/posts/2022/04/aws-acm-import-certificate/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eマネコンからの再インポートが面倒くさかったので備忘録。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cp\u003eシェルスクリプトから実行する。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003eset -eu\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# インポートする証明書の ARN\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eARN\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;arn:aws:acm:region:123456789012:certificate/12345678-1234-1234-1234-12345678901\t\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 証明書ファイルへのパス\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCRT\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Certificate.pem\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 中間証明書ファイルへのパス\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCC\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;CertificateChain.pem\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# パスワード無しの秘密鍵へのパス\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eKEY\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;PrivateKey.pem\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# リージョン\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eREGION\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;us-east-1\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws acm import-certificate \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --certificate fileb://\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eCRT\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --certificate-chain fileb://\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eCC\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --private-key fileb://\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eKEY\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --certificate-arn \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eARN\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  --region \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eREGION\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"参考サイト\"\u003e参考サイト\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.aws.amazon.com/ja_jp/acm/latest/userguide/import-reimport.html\"\u003e証明書を再インポートする - AWS Certificate Manager\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://awscli.amazonaws.com/v2/documentation/api/latest/reference/acm/import-certificate.html\"\u003eimport-certificate — AWS CLI 2.5.8 Command Reference\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% aws --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws-cli/2.5.8 Python/3.9.12 Darwin/21.4.0 source/x86_64 prompt/off\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"AWS CLI で証明書の再インポート"},{"content":"はじめに WP-CLI でテーブル内の文字列を置換する。\nやり方 プレフィックスがwp_のテーブル内のsearchをreplaceに置換してoutに書き出す。\n#!/bin/bash set -eu path=\u0026#34;wp-config.php があるディレクトリまでのパス\u0026#34; search=\u0026#34;https://stg.example.com\u0026#34; replace=\u0026#34;https://www.example.com\u0026#34; out=\u0026#34;export.sql\u0026#34; /path/to/wp search-replace --path=\u0026#34;${path}\u0026#34; \u0026#34;${search}\u0026#34; \u0026#34;${replace}\u0026#34; wp_* \\ --export=\u0026#34;${out}\u0026#34; \\ --report-changed-only \\ --all-tables-with-prefix --exportをつけない場合はテーブルのデータをじかに置換するので、実行前に--dry-runを忘れない。\n参考サイト wp search-replace | WP-CLI Command | WordPress Developer Resources 環境 % php wp --version WP-CLI 2.6.0 ","permalink":"https://d.oppara.tv/posts/2022/04/wp-search-replace/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://wp-cli.org/ja/\"\u003eWP-CLI\u003c/a\u003e でテーブル内の文字列を置換する。\u003c/p\u003e\n\u003ch2 id=\"やり方\"\u003eやり方\u003c/h2\u003e\n\u003cp\u003eプレフィックスが\u003ccode\u003ewp_\u003c/code\u003eのテーブル内の\u003ccode\u003esearch\u003c/code\u003eを\u003ccode\u003ereplace\u003c/code\u003eに置換して\u003ccode\u003eout\u003c/code\u003eに書き出す。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003eset -eu\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003epath\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;wp-config.php があるディレクトリまでのパス\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esearch\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://stg.example.com\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ereplace\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://www.example.com\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eout\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;export.sql\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/path/to/wp search-replace --path\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003epath\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003esearch\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003ereplace\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e wp_* \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e--export\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eout\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e--report-changed-only \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e--all-tables-with-prefix\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003ccode\u003e--export\u003c/code\u003eをつけない場合はテーブルのデータをじかに置換するので、実行前に\u003ccode\u003e--dry-run\u003c/code\u003eを忘れない。\u003c/p\u003e","title":"WP-CLI でテーブル内の文字列を置換する"},{"content":"目的 mail コマンドで対話的にメールを送るのが面倒だったので備忘録。\n対応方法 % echo \u0026#34;本文\u0026#34; | mail -s \u0026#34;件名\u0026#34; -r no-replay@example.com foo@oppara.tv bar@oppara.tv 環境 $ mail -V 12.5 7/5/10 $ cat /etc/os-release NAME=\u0026#34;Rocky Linux\u0026#34; VERSION=\u0026#34;8.5 (Green Obsidian)\u0026#34; ID=\u0026#34;rocky\u0026#34; ID_LIKE=\u0026#34;rhel centos fedora\u0026#34; VERSION_ID=\u0026#34;8.5\u0026#34; PLATFORM_ID=\u0026#34;platform:el8\u0026#34; PRETTY_NAME=\u0026#34;Rocky Linux 8.5 (Green Obsidian)\u0026#34; ANSI_COLOR=\u0026#34;0;32\u0026#34; CPE_NAME=\u0026#34;cpe:/o:rocky:rocky:8:GA\u0026#34; HOME_URL=\u0026#34;https://rockylinux.org/\u0026#34; BUG_REPORT_URL=\u0026#34;https://bugs.rockylinux.org/\u0026#34; ROCKY_SUPPORT_PRODUCT=\u0026#34;Rocky Linux\u0026#34; ROCKY_SUPPORT_PRODUCT_VERSION=\u0026#34;8\u0026#34; ","permalink":"https://d.oppara.tv/posts/2022/04/mail-one-liner/","summary":"\u003ch2 id=\"目的\"\u003e目的\u003c/h2\u003e\n\u003cp\u003email コマンドで対話的にメールを送るのが面倒だったので備忘録。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;本文\u0026#34;\u003c/span\u003e | mail -s \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;件名\u0026#34;\u003c/span\u003e -r no-replay@example.com foo@oppara.tv bar@oppara.tv\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$ mail -V\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e12.5 7/5/10\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e$ cat /etc/os-release\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNAME=\u0026#34;Rocky Linux\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVERSION=\u0026#34;8.5 (Green Obsidian)\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eID=\u0026#34;rocky\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eID_LIKE=\u0026#34;rhel centos fedora\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eVERSION_ID=\u0026#34;8.5\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePLATFORM_ID=\u0026#34;platform:el8\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePRETTY_NAME=\u0026#34;Rocky Linux 8.5 (Green Obsidian)\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eANSI_COLOR=\u0026#34;0;32\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCPE_NAME=\u0026#34;cpe:/o:rocky:rocky:8:GA\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eHOME_URL=\u0026#34;https://rockylinux.org/\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBUG_REPORT_URL=\u0026#34;https://bugs.rockylinux.org/\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eROCKY_SUPPORT_PRODUCT=\u0026#34;Rocky Linux\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eROCKY_SUPPORT_PRODUCT_VERSION=\u0026#34;8\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"メール送信ワンライナー"},{"content":"目的 Actions 時に呼び出すシェルスクリプト内で、Actions 時でなくてもブランチ名を利用したい。\n対応方法 #!/bin/bash set -Ceu if [ \u0026#34;${GITHUB_REF_NAME:-UNDEF}\u0026#34; = \u0026#34;UNDEF\u0026#34; ]; then GITHUB_REF_NAME=$(git rev-parse --abbrev-ref HEAD) fi 参考サイト 環境変数 - GitHub Docs ","permalink":"https://d.oppara.tv/posts/2022/04/github-actions-git-branch/","summary":"\u003ch2 id=\"目的\"\u003e目的\u003c/h2\u003e\n\u003cp\u003eActions 時に呼び出すシェルスクリプト内で、Actions 時でなくてもブランチ名を利用したい。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003eset -Ceu\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eGITHUB_REF_NAME\u003cspan style=\"color:#66d9ef\"\u003e:-\u003c/span\u003eUNDEF\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;UNDEF\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  GITHUB_REF_NAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003egit rev-parse --abbrev-ref HEAD\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"参考サイト\"\u003e参考サイト\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.github.com/ja/actions/learn-github-actions/environment-variables\"\u003e環境変数 - GitHub Docs\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","title":"GitHub Actions 時でなくてもブランチ名を利用したい"},{"content":"目的 CI 時に呼び出すシェルスクリプト内で、CI 時でなくてもブランチ名を利用したい。\n対応方法 #!/bin/bash set -Ceu if [ \u0026#34;${CI_COMMIT_REF_NAME:-UNDEF}\u0026#34; = \u0026#34;UNDEF\u0026#34; ]; then CI_COMMIT_REF_NAME=$(git rev-parse --abbrev-ref HEAD) fi ## 以下の書き方は GitLab 16.0 以降使えなくなる # if [ \u0026#34;${CI_BUILD_REF_NAME:-UNDEF}\u0026#34; = \u0026#34;UNDEF\u0026#34; ]; then # CI_BUILD_REF_NAME=$(git rev-parse --abbrev-ref HEAD) # fi bash のオプション C: リダイレクト時に既存のファイルを上書きしない。 e: コマンドがゼロ以外のステータスを返した場合、スクリプトを即座に終了する。 u: 未定義の変数を参照時にエラー。 参考サイト Deprecations by milestone | GitLab ","permalink":"https://d.oppara.tv/posts/2022/04/gitlab-ci-git-branch/","summary":"\u003ch2 id=\"目的\"\u003e目的\u003c/h2\u003e\n\u003cp\u003eCI 時に呼び出すシェルスクリプト内で、CI 時でなくてもブランチ名を利用したい。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003eset -Ceu\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eCI_COMMIT_REF_NAME\u003cspan style=\"color:#66d9ef\"\u003e:-\u003c/span\u003eUNDEF\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;UNDEF\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  CI_COMMIT_REF_NAME\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003e$(\u003c/span\u003egit rev-parse --abbrev-ref HEAD\u003cspan style=\"color:#66d9ef\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e## 以下の書き方は GitLab 16.0 以降使えなくなる\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# if [ \u0026#34;${CI_BUILD_REF_NAME:-UNDEF}\u0026#34; = \u0026#34;UNDEF\u0026#34; ]; then\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#   CI_BUILD_REF_NAME=$(git rev-parse --abbrev-ref HEAD)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# fi\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"bash-のオプション\"\u003ebash のオプション\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eC\u003c/code\u003e: リダイレクト時に既存のファイルを上書きしない。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ee\u003c/code\u003e: コマンドがゼロ以外のステータスを返した場合、スクリプトを即座に終了する。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eu\u003c/code\u003e: 未定義の変数を参照時にエラー。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"参考サイト\"\u003e参考サイト\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.gitlab.com/ee/update/deprecations.html#ci_build_-predefined-variables\"\u003eDeprecations by milestone | GitLab\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","title":"GitLab CI 時でなくてもブランチ名を利用したい"},{"content":"問題 Windows で rsync を使いたい。 でも WSL を使うほどでもない。\n対応方法 Git for Windows に rsync をインストールする。\nスタートメニューの「Git Bash」を右クリックして、「管理者として実行」する。 以下のシェルスクリプトを実行する。 #!/usr/bin/bash set -eu curl -L http://repo.msys2.org/msys/x86_64/zstd-1.4.5-2-x86_64.pkg.tar.xz |tar CvxJf / - curl -L http://repo.msys2.org/msys/x86_64/rsync-3.2.2-2-x86_64.pkg.tar.zst |tar Cxvf / - --zstd curl -L http://repo.msys2.org/msys/x86_64/libzstd-1.4.5-2-x86_64.pkg.tar.xz |tar CxvJf / - curl -L http://repo.msys2.org/msys/x86_64/libxxhash-0.8.0-1-x86_64.pkg.tar.zst |tar Cvxf / - --zstd 参考サイト Git for Windows に rsync を追加する 環境 Windows 10 21H2 (OS ビルド 19044, 1586) Git for Windows 2.35.1 rsync version 3.2.2 protocol version 31 ","permalink":"https://d.oppara.tv/posts/2022/03/windows-rsync/","summary":"\u003ch2 id=\"問題\"\u003e問題\u003c/h2\u003e\n\u003cp\u003eWindows で rsync を使いたい。\nでも WSL を使うほどでもない。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cp\u003eGit for Windows に rsync をインストールする。\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eスタートメニューの「Git Bash」を右クリックして、「管理者として実行」する。\u003c/li\u003e\n\u003cli\u003e以下のシェルスクリプトを実行する。\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/usr/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003eset -eu\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecurl -L http://repo.msys2.org/msys/x86_64/zstd-1.4.5-2-x86_64.pkg.tar.xz |tar CvxJf / -\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecurl -L http://repo.msys2.org/msys/x86_64/rsync-3.2.2-2-x86_64.pkg.tar.zst |tar Cxvf / - --zstd\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecurl -L http://repo.msys2.org/msys/x86_64/libzstd-1.4.5-2-x86_64.pkg.tar.xz |tar CxvJf / -\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecurl -L http://repo.msys2.org/msys/x86_64/libxxhash-0.8.0-1-x86_64.pkg.tar.zst  |tar Cvxf / - --zstd\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"参考サイト\"\u003e参考サイト\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://zenn.dev/miwarin/articles/14a10b3278e7a6\"\u003eGit for Windows に rsync を追加する\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eWindows 10 21H2 (OS ビルド 19044, 1586)\u003c/li\u003e\n\u003cli\u003eGit for Windows 2.35.1\u003c/li\u003e\n\u003cli\u003ersync version 3.2.2 protocol version 31\u003c/li\u003e\n\u003c/ul\u003e","title":"Windows で rsync を使いたい"},{"content":"問題 Chrome を使うとファンがうなりを上げる。\n対応方法 chrome://flags/#enhanced-bookmarks-experimentを開く。 bookmarkで検索。 以下の機能を Disabled に変更する。 Omnibox short bookmark suggestions Omnibox Bookmark Paths Omnibox Site Search Starter Pack Reading List Chrome を再起動する。 参考サイト 2022年 重たいChromeを軽くする意外な解決方法とは？ | オランダで生きていく 環境 % /Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome --version Google Chrome 99.0.4844.83 % sw_vers ProductName: macOS ProductVersion: 12.2 BuildVersion: 21D49 ","permalink":"https://d.oppara.tv/posts/2022/03/chrome-fan-solution/","summary":"\u003ch2 id=\"問題\"\u003e問題\u003c/h2\u003e\n\u003cp\u003eChrome を使うとファンがうなりを上げる。\u003c/p\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003ccode\u003echrome://flags/#enhanced-bookmarks-experiment\u003c/code\u003eを開く。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ebookmark\u003c/code\u003eで検索。\u003c/li\u003e\n\u003cli\u003e以下の機能を Disabled に変更する。\n\u003cul\u003e\n\u003cli\u003eOmnibox short bookmark suggestions\u003c/li\u003e\n\u003cli\u003eOmnibox Bookmark Paths\u003c/li\u003e\n\u003cli\u003eOmnibox Site Search Starter Pack\u003c/li\u003e\n\u003cli\u003eReading List\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eChrome を再起動する。\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"参考サイト\"\u003e参考サイト\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://nldot.info/chrome-slow-fix/\"\u003e2022年 重たいChromeを軽くする意外な解決方法とは？ | オランダで生きていく\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% /Applications/Google\u003cspan style=\"color:#ae81ff\"\u003e\\ \u003c/span\u003eChrome.app/Contents/MacOS/Google\u003cspan style=\"color:#ae81ff\"\u003e\\ \u003c/span\u003eChrome --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eGoogle Chrome 99.0.4844.83\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% sw_vers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductName:    macOS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductVersion: 12.2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuildVersion:   21D49\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Chrome を使っているとファンがうるさい"},{"content":"はじめに よく使う変数内文字列置換を忘れるのでのメモ。\n例 ~/tmp/hoge.sh\n#!/bin/bash echo \u0026#34;$0\u0026#34; # basename echo \u0026#34;${0##*/}\u0026#34; # 拡張子取得 echo \u0026#34;${0##*\\.}\u0026#34; # dirname echo \u0026#34;${0%/*}\u0026#34; # 拡張子以外 echo \u0026#34;${0%.*}\u0026#34; output\n/Users/oppara/tmp/hoge.sh hoge.sh sh /Users/oppara/tmp /Users/oppara/tmp/hoge 環境 % sw_vers ProductName: macOS ProductVersion: 12.2 BuildVersion: 21D49 % bash --version GNU bash, version 3.2.57(1)-release (x86_64-apple-darwin21) Copyright (C) 2007 Free Software Foundation, Inc. ","permalink":"https://d.oppara.tv/posts/2022/03/bash-string-replacement/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eよく使う変数内文字列置換を忘れるのでのメモ。\u003c/p\u003e\n\u003ch2 id=\"例\"\u003e例\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e~/tmp/hoge.sh\u003c/code\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$0\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# basename\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003e0##*/\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 拡張子取得\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003e0##*\u003cspan style=\"color:#ae81ff\"\u003e\\.\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# dirname\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003e0%/*\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 拡張子以外\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003e0%.*\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eoutput\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/Users/oppara/tmp/hoge.sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehoge.sh\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esh\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/Users/oppara/tmp\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/Users/oppara/tmp/hoge\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% sw_vers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductName:    macOS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductVersion: 12.2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuildVersion:   21D49\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% bash --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eGNU bash, version 3.2.57(1)-release (x86_64-apple-darwin21)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCopyright (C) 2007 Free Software Foundation, Inc.\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Bash 変数文字列置換"},{"content":"問題 マークダウンを PDF に変換しようとすると以下のエラー。\n% pandoc hoge.md -o hoge.pdf pandoc: pdflatex: createProcess: posix_spawnp: illegal operation (Inappropriate ioctl for device) 対応方法 wkhtmltopdf を使ってみる。\nwkhtmltopdf のインストール。\n% brew install --cask wkhtmltopdf マークダウンを PDF に変換する。\n% pandoc hoge.md -o hoge.pdf --pdf-engine wkhtmltopdf 環境 % sw_vers ProductName: macOS ProductVersion: 12.2 BuildVersion: 21D49 % pandoc --version pandoc 2.17.1.1 ","permalink":"https://d.oppara.tv/posts/2022/03/pandoc-markdown-pdf-error/","summary":"\u003ch2 id=\"問題\"\u003e問題\u003c/h2\u003e\n\u003cp\u003eマークダウンを PDF に変換しようとすると以下のエラー。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% pandoc hoge.md -o hoge.pdf\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003epandoc: pdflatex: createProcess: posix_spawnp: illegal operation (Inappropriate ioctl for device)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://wkhtmltopdf.org/\"\u003ewkhtmltopdf\u003c/a\u003e を使ってみる。\u003c/p\u003e\n\u003cp\u003ewkhtmltopdf のインストール。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% brew install --cask wkhtmltopdf\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eマークダウンを PDF に変換する。\u003c/p\u003e","title":"Pandoc マークダウンを PDF に変換しようとしてエラー"},{"content":"はじめに AWS CLI で AWS Backup を利用した EC2 のバックアップ設定の備忘録。\nデフォルトのロールの作成 1 つもバックアッププランがない状態で、cli 経由でバックリソースを作成した場合、デフォルトのロール ( AWSBackupDefaultServiceRole ) は自動で作成されないので注意。\n（マネコンからバックアップリソース作成時、IAM ロールで「デフォルトのロール」を選択した場合はデフォルトのロールが作成される）\nロール作成用のシェルスクリプト 名前: AWSBackupDefaultServiceRole 信頼されたエンティティAWS のサービス: backup.amazonaws.com ポリシー: AWSBackupServiceRolePolicyForRestores AWSBackupServiceRolePolicyForBackup 表示 #!/bin/bash set -eu ROLE_NAME=\u0026#34;AWSBackupDefaultServiceRole\u0026#34; # IAM ロールを作成 aws iam create-role \\ --role-name \u0026#34;${ROLE_NAME}\u0026#34; \\ --assume-role-policy-document file://backup-role-policy.json # AWSBackupServiceRolePolicyForBackup ポリシーをアタッチ aws iam attach-role-policy \\ --role-name \u0026#34;${ROLE_NAME}\u0026#34; \\ --policy-arn arn:aws:iam::aws:policy/service-role/AWSBackupServiceRolePolicyForBackup # AWSBackupServiceRolePolicyForRestores ポリシーをアタッチ aws iam attach-role-policy \\ --role-name \u0026#34;${ROLE_NAME}\u0026#34; \\ --policy-arn arn:aws:iam::aws:policy/service-role/AWSBackupServiceRolePolicyForRestores # EC2 のバックアップをする場合、以下のインラインポリシーを追加する必要あり aws iam put-role-policy \\ --role-name \u0026#34;${ROLE_NAME}\u0026#34; \\ --policy-name ec2-backup-policy \\ --policy-document file://ec2-backup-policy.json backup-role-policy.json\n{ \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: { \u0026#34;Service\u0026#34;: \u0026#34;backup.amazonaws.com\u0026#34; }, \u0026#34;Action\u0026#34;: \u0026#34;sts:AssumeRole\u0026#34; } ] } ec2-backup-policy.json\n{ \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: \u0026#34;ec2:DescribeFastSnapshotRestores\u0026#34;, \u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34; }, { \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Action\u0026#34;: \u0026#34;iam:PassRole\u0026#34;, \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:iam::\u0026lt;アカウントID\u0026gt;:role/service-role/AWSBackupDefaultServiceRole\u0026#34; } ] } EC2 バックアップの CLI 実行例 前提: デフォルトのロール ( AWSBackupDefaultServiceRole ) は作成済み。\n1. バックアップボールトを作成 % aws backup create-backup-vault \\ --backup-vault-name \u0026lt;バックアップボールト名\u0026gt; \\ --encryption-key-arn \u0026lt;サーバー側で暗号化する際の KMS の暗号化キーの ARN\u0026gt; { \u0026#34;BackupVaultName\u0026#34;: \u0026#34;バックアップボールト名\u0026#34;, \u0026#34;BackupVaultArn\u0026#34;: \u0026#34;作成されたバックアップボールトの ARN\u0026gt;\u0026#34;, \u0026#34;CreationDate\u0026#34;: \u0026#34;YYYY-MM-DDThh:mm:ss+09:00\u0026#34; } 2. バックアッププランを作成 $ aws backup create-backup-plan --backup-plan file://backup-plan.json { \u0026#34;BackupPlanId\u0026#34;: \u0026#34;作成されたバックアッププランの ID\u0026#34;, \u0026#34;BackupPlanArn\u0026#34;: \u0026#34;作成されたバックアッププランの ARN\u0026#34;, \u0026#34;CreationDate\u0026#34;: \u0026#34;YYYY-MM-DDThh:mm:ss+09:00\u0026#34;, \u0026#34;VersionId\u0026#34;: \u0026#34;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u0026#34; } backup-plan.json\n{ \u0026#34;BackupPlanName\u0026#34;: \u0026#34;\u0026lt;バックアッププラン名\u0026gt;\u0026#34;, \u0026#34;Rules\u0026#34;: [ { \u0026#34;RuleName\u0026#34;: \u0026#34;\u0026lt;バックアップルール名\u0026gt;\u0026#34;, \u0026#34;TargetBackupVaultName\u0026#34;: \u0026#34;\u0026lt;作成したバックアップボールト名\u0026gt;\u0026#34;, \u0026#34;ScheduleExpression\u0026#34;: \u0026#34;cron(3 18 ? * * *)\u0026#34;, \u0026#34;StartWindowMinutes\u0026#34;: 120, \u0026#34;CompletionWindowMinutes\u0026#34;: 300, \u0026#34;Lifecycle\u0026#34;: { \u0026#34;DeleteAfterDays\u0026#34;: 5 } } ] } 3. バックアップリソースの割り当て $ aws backup create-backup-selection \\ --backup-plan-id \u0026lt;作成されたバックアッププランの ID\u0026gt; \\ --backup-selection file://backup-selection.json { \u0026#34;SelectionId\u0026#34;: \u0026#34;作成されたセレクションの ID\u0026#34;, \u0026#34;BackupPlanId\u0026#34;: \u0026#34;作成されたバックアッププランの ID\u0026#34;, \u0026#34;CreationDate\u0026#34;: \u0026#34;YYYY-MM-DDThh:mm:ss+09:00\u0026#34; } backup-selection.json (EC2 インスタンスをバックアップする)\n{ \u0026#34;SelectionName\u0026#34;: \u0026#34;ec2-prod\u0026#34;, \u0026#34;IamRoleArn\u0026#34;: \u0026#34;AWSBackupDefaultServiceRole の ARN\u0026#34;, \u0026#34;Resources\u0026#34;: [ \u0026#34;バックアップを設定する EC2 インスタンスの ID\u0026gt;\u0026#34; ], \u0026#34;ListOfTags\u0026#34;: [] } 参考サイト backup — AWS CLI 2.4.27 Command Reference 環境 % sw_vers ProductName: macOS ProductVersion: 12.2 BuildVersion: 21D49 % aws --version aws-cli/2.4.26 Python/3.9.10 Darwin/21.3.0 source/x86_64 prompt/off ","permalink":"https://d.oppara.tv/posts/2022/03/aws-backup-ec2-cli/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eAWS CLI で AWS Backup を利用した EC2 のバックアップ設定の備忘録。\u003c/p\u003e\n\u003ch2 id=\"デフォルトのロールの作成\"\u003eデフォルトのロールの作成\u003c/h2\u003e\n\u003cp\u003e1 つもバックアッププランがない状態で、cli 経由でバックリソースを作成した場合、デフォルトのロール ( AWSBackupDefaultServiceRole ) は自動で作成されないので注意。\u003cbr\u003e\n（マネコンからバックアップリソース作成時、IAM ロールで「デフォルトのロール」を選択した場合はデフォルトのロールが作成される）\u003c/p\u003e","title":"AWS CLI で AWS Backup を利用した EC2 のバックアップ設定をする"},{"content":"#!/usr/bin/env bash set -e desc() { while read -r line do set ${line} name=${1} ip=${2} echo \u0026#34;${name}: ${ip}\u0026#34; done } aws ec2 describe-instances --filter \u0026#34;Name=instance-state-name,Values=running\u0026#34; \\ | jq -r \u0026#39;.Reservations[].Instances[] | [(.Tags[] | select(.Key==\u0026#34;Name\u0026#34;).Value), .PrivateIpAddress] | @tsv\u0026#39; \\ | desc ec2:DescribeInstancesポリシーが必要。\n環境 % sw_vers ProductName: macOS ProductVersion: 12.2 BuildVersion: 21D49 % aws --version aws-cli/2.4.26 Python/3.9.10 Darwin/21.3.0 source/x86_64 prompt/off ","permalink":"https://d.oppara.tv/posts/2022/03/aws-ec2-describe-ipaddress/","summary":"\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/usr/bin/env bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003eset -e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edesc\u003cspan style=\"color:#f92672\"\u003e()\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003ewhile\u003c/span\u003e read -r line\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    set \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eline\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    name\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003e1\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ip\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003e2\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003ename\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003eip\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eaws ec2 describe-instances --filter \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Name=instance-state-name,Values=running\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  | jq -r \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;.Reservations[].Instances[] | [(.Tags[] | select(.Key==\u0026#34;Name\u0026#34;).Value), .PrivateIpAddress] | @tsv\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#ae81ff\"\u003e\u003c/span\u003e  | desc\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003ccode\u003eec2:DescribeInstances\u003c/code\u003eポリシーが必要。\u003c/p\u003e","title":"EC2インスタンスのタグとプライベートIPアドレスを表示する"},{"content":"はじめに 変数のデフォルト値の設定をを忘れるのでのメモ。\n例 #!/bin/bash # var には代入されない echo \u0026#34;hello ${var:-world}\u0026#34; echo \u0026#34;$var\u0026#34; # デフォルト値を変数化するときは再代入した方が楽 var=${var:-foo} echo \u0026#34;${var}\u0026#34; output\nhello world foo 環境 % sw_vers ProductName: macOS ProductVersion: 12.2 BuildVersion: 21D49 % bash --version GNU bash, version 3.2.57(1)-release (x86_64-apple-darwin21) Copyright (C) 2007 Free Software Foundation, Inc. ","permalink":"https://d.oppara.tv/posts/2022/03/bash-default-value/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003e変数のデフォルト値の設定をを忘れるのでのメモ。\u003c/p\u003e\n\u003ch2 id=\"例\"\u003e例\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#!/bin/bash\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# var には代入されない\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;hello \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003evar\u003cspan style=\"color:#66d9ef\"\u003e:-\u003c/span\u003eworld\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$var\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# デフォルト値を変数化するときは再代入した方が楽\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003evar\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003evar\u003cspan style=\"color:#66d9ef\"\u003e:-\u003c/span\u003efoo\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eecho \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003evar\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eoutput\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode class=\"language-consle\" data-lang=\"consle\"\u003ehello world\n\nfoo\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% sw_vers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductName:    macOS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductVersion: 12.2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuildVersion:   21D49\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% bash --version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eGNU bash, version 3.2.57(1)-release (x86_64-apple-darwin21)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCopyright (C) 2007 Free Software Foundation, Inc.\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Bash 変数のデフォルト値を設定する"},{"content":"はじめに AWS Vault を使って MFA 経由で AssumeRole する備忘録。\n99designs/aws-vault\n前提 以下のアカウントを作成済みでスイッチロールの設定済み。\noppara (default): スイッチ元 (MFA 認証) oppara-dev: スイッチ先 対応方法 AWS Vault のインストール % brew cask install aws-vault AccessKeyId, SecretAccessKey をキーチェーンに登録 AWS Vault で生成するキーチェーンにアクセスする為のパスワード入力するダイアログが表示されるので設定する。\n% aws-vault add default Enter Access Key Id: xxxxxxxxxxxxxxxxxxxx Enter Secret Key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx Credential が登録されている。\n% aws-vault list Profile Credentials Sessions ======= =========== ======== default default - ~/.aws/config の設定 [default] output=json region=ap-northeast-1 [profile oppara-dev] source_profile=default mfa_serial=arn:aws:iam::xxxxxxxxxxxx:mfa/oppara role_arn=arn:aws:iam::zzzzzzzzzzzz:role/\u0026lt;ロール名\u0026gt; mfa_serial: スイッチ元アカウントの「MFA デバイスの割り当て」 role_arn: スイッチ時に使用するスイッチ先アカウントの IAM ロールの ARN 実行 oppara-dev アカウントの S3 バケット一覧を表示する。\naws-vaultキーチェーンへアクセスする為のパスワードを入力する MFA コードを入力するよう求められるので入力する\n素の AWS CLI と違い入力したコードが表示されるので入力が楽 😆 % aws-vault exec oppara-dev -- aws s3 ls Enter MFA code for arn:aws:iam::xxxxxxxxxxxx:mfa/oppara: 2021-07-01 23:13:48 cdk-hnb659fds-assets-552376481266-ap-northeast-1 2020-06-10 00:58:26 cf-templates-8pyd86xx4vzz-ap-northeast-1 2021-05-31 01:18:49 rain-artifacts-552376481266-ap-northeast-1 セッションができている。\n% aws-vault list Profile Credentials Sessions ======= =========== ======== default default - oppara-dev - sts.AssumeRole:37m15s セッションが切れるまでは、コマンドを実行しても MFA コードの入力は求められない。\n便利 😆\n% aws-vault exec oppara-dev -- aws s3 ls 2021-07-01 23:13:48 cdk-hnb659fds-assets-552376481266-ap-northeast-1 2020-06-10 00:58:26 cf-templates-8pyd86xx4vzz-ap-northeast-1 2021-05-31 01:18:49 rain-artifacts-552376481266-ap-northeast-1 環境 % sw_vers ProductName: macOS ProductVersion: 12.2 BuildVersion: 21D49 % aws-vault --version v6.6.0 ","permalink":"https://d.oppara.tv/posts/2022/03/aws-vault-assumerole-mfa/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eAWS Vault を使って MFA 経由で AssumeRole する備忘録。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/99designs/aws-vault\"\u003e99designs/aws-vault\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"前提\"\u003e前提\u003c/h2\u003e\n\u003cp\u003e以下のアカウントを作成済みでスイッチロールの設定済み。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eoppara (default): スイッチ元 (MFA 認証)\u003c/li\u003e\n\u003cli\u003eoppara-dev: スイッチ先\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003ch3 id=\"aws-vault-のインストール\"\u003eAWS Vault のインストール\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% brew cask install aws-vault\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"accesskeyid-secretaccesskey-をキーチェーンに登録\"\u003eAccessKeyId, SecretAccessKey をキーチェーンに登録\u003c/h3\u003e\n\u003cp\u003eAWS Vault で生成するキーチェーンにアクセスする為のパスワード入力するダイアログが表示されるので設定する。\u003c/p\u003e","title":"AWS Vault を使って MFA と AssumeRole（スイッチロール） "},{"content":"はじめに Session Manager で EC2 上の Amazon Linux にログイン後、他のユーザーになるための備忘録。\nログイン時はssm-user\nsh-4.2$ whoami ssm-user 対応方法 ec2-user になる sh-4.2$ sudo su --login ec2-user root になる sh-4.2$ sudo su --login 環境 sh-4.2$ cat /etc/system-release Amazon Linux release 2 (Karoo) sh-4.2$ amazon-ssm-agent -version SSM Agent version: 3.0.1124.0 ","permalink":"https://d.oppara.tv/posts/2022/03/aws-ssm-switch-user/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eSession Manager で EC2 上の Amazon Linux にログイン後、他のユーザーになるための備忘録。\u003c/p\u003e\n\u003cp\u003eログイン時は\u003ccode\u003essm-user\u003c/code\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esh-4.2$ whoami\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003essm-user\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003ch3 id=\"ec2-user-になる\"\u003eec2-user になる\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esh-4.2$ sudo su --login ec2-user\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"root-になる\"\u003eroot になる\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esh-4.2$ sudo su --login\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esh-4.2$ cat /etc/system-release\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eAmazon Linux release 2 (Karoo)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003esh-4.2$ amazon-ssm-agent -version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSSM Agent version: 3.0.1124.0\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Session Manager で Amazon Linux にログイン後ユーザーを切り替える"},{"content":"問題 git logの表示が寂しい。\n対応 好みのログを表示するエイリアスを設定する。\nGit のエイリアス ; ~/.gitconfig [alias] ll = log --graph --color \\ --pretty=format:\u0026#39;%C(red)%x09%h %C(yellow)%cn %C(green)%ci %C(reset)%s%C(blue)%d%C(reset)\u0026#39; format 解説 %C(red)%x09%h 9 文字空けて省略されたコミットハッシュを赤で表示 %C(yellow)%cn コミッターの名前を黄色で表示 %C(green)%ci コミットした日時を ISO8601 ぽい形式で緑で表示 %C(reset)%s 表示色をリセットし、件名（コミットメッセージの 1 行目）を表示 %C(blue)%d%C(reset) ref name を青で表示し、再度表示色をリセット 本家の解説ページ\nGit - pretty-formats Documentation\nシェルのエイリアス とりあえず、10 行だけ欲しい。\nalias gl=\u0026#34;git ll | head -10 \u0026amp;\u0026amp; echo\u0026#34; 実行結果 環境 % sw_vers ProductName: macOS ProductVersion: 12.2 BuildVersion: 21D49 % git --version git version 2.35.1 ","permalink":"https://d.oppara.tv/posts/2022/03/git-log-alias/","summary":"\u003ch2 id=\"問題\"\u003e問題\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003egit log\u003c/code\u003eの表示が寂しい。\u003c/p\u003e\n\u003ch2 id=\"対応\"\u003e対応\u003c/h2\u003e\n\u003cp\u003e好みのログを表示するエイリアスを設定する。\u003c/p\u003e\n\u003ch3 id=\"git-のエイリアス\"\u003eGit のエイリアス\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-ini\" data-lang=\"ini\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e; ~/.gitconfig\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003e[alias]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#a6e22e\"\u003ell\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003elog --graph --color \\\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e        --pretty=format:\u0026#39;%C(red)%x09%h %C(yellow)%cn %C(green)%ci %C(reset)%s%C(blue)%d%C(reset)\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ctable\u003e\n  \u003cthead\u003e\n      \u003ctr\u003e\n          \u003cth\u003eformat\u003c/th\u003e\n          \u003cth\u003e解説\u003c/th\u003e\n      \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e%C(red)%x09%h\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e9 文字空けて省略されたコミットハッシュを赤で表示\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e%C(yellow)%cn\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eコミッターの名前を黄色で表示\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e%C(green)%ci\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eコミットした日時を ISO8601 ぽい形式で緑で表示\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e%C(reset)%s\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003e表示色をリセットし、件名（コミットメッセージの 1 行目）を表示\u003c/td\u003e\n      \u003c/tr\u003e\n      \u003ctr\u003e\n          \u003ctd\u003e\u003ccode\u003e%C(blue)%d%C(reset)\u003c/code\u003e\u003c/td\u003e\n          \u003ctd\u003eref name を青で表示し、再度表示色をリセット\u003c/td\u003e\n      \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003e本家の解説ページ\u003cbr\u003e\n\u003ca href=\"https://git-scm.com/docs/pretty-formats\"\u003eGit - pretty-formats Documentation\u003c/a\u003e\u003c/p\u003e","title":"git log のエイリアス"},{"content":"はじめに speedtest.net の CLI クライアント があったので試してみる。\nインストール % brew install teamookla/speedtest/speedtest 初回実行 初回実行時は、ライセンスの確認がある。\n% speedtest ==================================================================== You may only use this Speedtest software and information generated from it for personal, non-commercial use, through a command line interface on a personal computer. Your use of this software is subject to the End User License Agreement, Terms of Use and Privacy Policy at these URLs: https://www.speedtest.net/about/eula https://www.speedtest.net/about/terms https://www.speedtest.net/about/privacy ===================================================================== Do you accept the license? [type YES to accept]: サーバ選択の詳細を表示しながら実行 % speedtest --selection-details Speedtest by Ookla Selecting server: 20976: 6.24 ms; GLBB Japan - Tokyo 21569: 5.66 ms; i3D.net - Tokyo 38241: 5.51 ms; BudgetVM - Tokyo 28910: 212.52 ms; fdcservers.net - Tokyo 48301: 5.96 ms; Cloudflare - Tokyo 24333: 17.89 ms; Rakuten Mobile, Inc - Tokyo 44988: 7.02 ms; Misaka Network, Inc. - Tokyo 48463: 5.79 ms; IPA CyberLab 400G - Tokyo 14623: 6.14 ms; IPA CyberLab - Bunkyo 8407: 10.31 ms; Allied Telesis Capital Corporation - Sagamihara Server: BudgetVM - Tokyo (id = 38241) ISP: Softbank BB Latency: 5.63 ms (0.76 ms jitter) Download: 117.23 Mbps (data used: 124.7 MB) Upload: 230.65 Mbps (data used: 134.4 MB) Packet Loss: 0.0% Result URL: https://www.speedtest.net/result/c/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx サーバ ID を指定して実行 % speedtest -s 21569 Speedtest by Ookla Server: i3D.net - Tokyo (id = 21569) ISP: Softbank BB Latency: 5.61 ms (0.40 ms jitter) Download: 110.67 Mbps (data used: 69.7 MB) Upload: 219.27 Mbps (data used: 145.6 MB) Packet Loss: 0.0% Result URL: https://www.speedtest.net/result/c/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx 環境 % sw_vers ProductName: macOS ProductVersion: 12.2 BuildVersion: 21D49 % speedtest -V Speedtest by Ookla 1.1.1.84 (3bdba79799) Darwin 21.3.0 x86_64 ","permalink":"https://d.oppara.tv/posts/2022/03/cli-speedtest/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://www.speedtest.net/\"\u003espeedtest.net\u003c/a\u003e の \u003ca href=\"https://www.speedtest.net/apps/cli\"\u003eCLI クライアント\u003c/a\u003e があったので試してみる。\u003c/p\u003e\n\u003ch2 id=\"インストール\"\u003eインストール\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% brew install teamookla/speedtest/speedtest\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"初回実行\"\u003e初回実行\u003c/h2\u003e\n\u003cp\u003e初回実行時は、ライセンスの確認がある。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% speedtest\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e====================================================================\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003eYou may only use this Speedtest software and information generated\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efrom it for personal, non-commercial use, through a command line\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003einterface on a personal computer. Your use of this software is subject\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eto the End User License Agreement, Terms of Use and Privacy Policy at\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ethese URLs:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e        https://www.speedtest.net/about/eula\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        https://www.speedtest.net/about/terms\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        https://www.speedtest.net/about/privacy\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e=====================================================================\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003eDo you accept the license? [type YES to accept]:\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"サーバ選択の詳細を表示しながら実行\"\u003eサーバ選択の詳細を表示しながら実行\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% speedtest --selection-details\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e   Speedtest by Ookla\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003eSelecting server:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      20976:   6.24 ms; GLBB Japan - Tokyo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      21569:   5.66 ms; i3D.net - Tokyo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      38241:   5.51 ms; BudgetVM - Tokyo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      28910: 212.52 ms; fdcservers.net - Tokyo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      48301:   5.96 ms; Cloudflare - Tokyo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      24333:  17.89 ms; Rakuten Mobile, Inc - Tokyo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      44988:   7.02 ms; Misaka Network, Inc. - Tokyo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      48463:   5.79 ms; IPA CyberLab 400G - Tokyo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      14623:   6.14 ms; IPA CyberLab - Bunkyo\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e       8407:  10.31 ms; Allied Telesis Capital Corporation - Sagamihara\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     Server: BudgetVM - Tokyo (id = 38241)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ISP: Softbank BB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    Latency:     5.63 ms   (0.76 ms jitter)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   Download:   117.23 Mbps (data used: 124.7 MB)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     Upload:   230.65 Mbps (data used: 134.4 MB)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePacket Loss:     0.0%\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e Result URL: https://www.speedtest.net/result/c/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"サーバ-id-を指定して実行\"\u003eサーバ ID を指定して実行\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% speedtest -s \u003cspan style=\"color:#ae81ff\"\u003e21569\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e   Speedtest by Ookla\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e     Server: i3D.net - Tokyo (id = 21569)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ISP: Softbank BB\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    Latency:     5.61 ms   (0.40 ms jitter)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e   Download:   110.67 Mbps (data used: 69.7 MB)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e     Upload:   219.27 Mbps (data used: 145.6 MB)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ePacket Loss:     0.0%\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e Result URL: https://www.speedtest.net/result/c/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% sw_vers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductName:    macOS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductVersion: 12.2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuildVersion:   21D49\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% speedtest -V\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eSpeedtest by Ookla 1.1.1.84 (3bdba79799) Darwin 21.3.0 x86_64\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Speedtest の CLI クライアントを試してみる"},{"content":"はじめに yaml から toml への変換ツールを探していて良さげなものを発見したので使ってみる。\nsclevine/yj: CLI - Convert between YAML, TOML, JSON, and HCL インストール % brew install yj 使い方 標準入力から読み込ませてリダイレクトする感じ。\n% yj -yt -i \u0026lt; example.yaml \u0026gt; example.toml or\n% cat example.yaml | yj -yt -i \u0026gt; example.toml 環境 % sw_vers ProductName: macOS ProductVersion: 12.2 BuildVersion: 21D49 % yj -v v5.0.0 ","permalink":"https://d.oppara.tv/posts/2022/03/cli-yaml-toml-json-hcl-converter/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003eyaml から toml への変換ツールを探していて良さげなものを発見したので使ってみる。\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/sclevine/yj\"\u003esclevine/yj: CLI - Convert between YAML, TOML, JSON, and HCL\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"インストール\"\u003eインストール\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% brew install yj\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"使い方\"\u003e使い方\u003c/h2\u003e\n\u003cp\u003e標準入力から読み込ませてリダイレクトする感じ。\u003c/p\u003e","title":"yaml, toml, json, hclの変換ツール yj"},{"content":"DNS の設定 d.oppara.tvの CNAME をoppara.github.ioに設定する。\n% dig d.oppara.tv @8.8.8.8 ... ;; ANSWER SECTION: d.oppara.tv. 3600 IN CNAME oppara.github.io. oppara.github.io. 3600 IN A 185.199.108.153 oppara.github.io. 3600 IN A 185.199.111.153 oppara.github.io. 3600 IN A 185.199.109.153 oppara.github.io. 3600 IN A 185.199.110.153 ... GitHub Actions を設定する GitHub Actions による GitHub Pages への自動デプロイ - Qiita\n変更箇所\npull_request:を削除 hugo のバージョンを 0.94.0 に変更 publish_dir: ./publicを削除 gh-pages ブランチの直下にデプロイする。 cname option を設定 重要 設定しないとデプロイ時に Custom domain の設定が初期化され、URL にアクセスしても 404 になってしまう。 GitHub の設定 Settings -\u0026gt; Pages\n","permalink":"https://d.oppara.tv/posts/2022/03/hugo-github-pages/","summary":"\u003ch2 id=\"dns-の設定\"\u003eDNS の設定\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003ed.oppara.tv\u003c/code\u003eの CNAME を\u003ccode\u003eoppara.github.io\u003c/code\u003eに設定する。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% dig d.oppara.tv @8.8.8.8\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e;; ANSWER SECTION:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ed.oppara.tv.            3600    IN      CNAME   oppara.github.io.\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eoppara.github.io.       3600    IN      A       185.199.108.153\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eoppara.github.io.       3600    IN      A       185.199.111.153\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eoppara.github.io.       3600    IN      A       185.199.109.153\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eoppara.github.io.       3600    IN      A       185.199.110.153\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e...\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"github-actions-を設定する\"\u003eGitHub Actions を設定する\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://qiita.com/peaceiris/items/d401f2e5724fdcb0759d\"\u003eGitHub Actions による GitHub Pages への自動デプロイ - Qiita\u003c/a\u003e\u003c/p\u003e","title":"Hugo で作成した記事を GitHub Pages で公開する"},{"content":"はじめに hugo vim editorで検索していたら以下の b4b4r07 さんの良さげなブログを発見。\nスムーズに Hugo でブログを書くツール | tellme.tokyo\n上記ブログで使用されている b4b4r07/blog を使用するには、以下の環境変数の設定が必要な模様。\nBLOG_ROOT: hugo new siteでできたディレクトリのパスを指定。 BLOG_POST_DIR: 記事を作成するディレクトリ。BLOG_ROOT からの相対パスを指定。 設定例 export BLOG_ROOT=\u0026#34;${HOME}/src/github.com/oppara/d.oppara.tv\u0026#34; export BLOG_POST_DIR=`date +\u0026#34;content/posts/%Y/%m\u0026#34;` blog new で作成される日付を JST にしたい The 力技。\ndiff --git a/cmd/new.go b/cmd/new.go index 4996bfb..85d597e 100644 --- a/cmd/new.go +++ b/cmd/new.go @@ -69,7 +69,7 @@ func (c *newCmd) run(args []string) error { Command: \u0026#34;hugo\u0026#34;, Args: []string{\u0026#34;new\u0026#34;, strings.TrimPrefix(next, \u0026#34;content/\u0026#34;)}, Dir: c.RootPath, - Env: map[string]string{}, + Env: map[string]string{\u0026#34;TZ\u0026#34;:\u0026#34;Asia/Tokyo\u0026#34;}, Stdin: os.Stdin, Stdout: ioutil.Discard, Stderr: ioutil.Discard, https://github.com/oppara/b4b4r07-blog/commit/1b653d83f0352d0bc06e9b1e737ec292c85989e1\n環境 % sw_vers ProductName: macOS ProductVersion: 12.2 BuildVersion: 21D49 % hugo version hugo v0.94.0+extended darwin/amd64 BuildDate=unknown ","permalink":"https://d.oppara.tv/posts/2022/03/hugo-blog-tool/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003ehugo vim editor\u003c/code\u003eで検索していたら以下の b4b4r07 さんの良さげなブログを発見。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://tellme.tokyo/post/2018/10/16/write-blog-smoothly/\"\u003eスムーズに Hugo でブログを書くツール | tellme.tokyo\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e上記ブログで使用されている \u003ca href=\"https://github.com/b4b4r07/blog\"\u003eb4b4r07/blog\u003c/a\u003e を使用するには、以下の環境変数の設定が必要な模様。\u003c/p\u003e","title":"スムーズに Hugo でブログを書くツール"},{"content":"問題 --editor オプション付きで hugo new すると以下のエラーになってしまう。\n% hugo new posts/2022/03/hoge/index.md --editor vim Content \u0026#34;/path/to/hugo/content/posts/2022/03/hoge/index.md\u0026#34; created Editing \u0026#34;/path/to/hugo/content/posts/2022/03/hoge/index.md\u0026#34; with \u0026#34;vim\u0026#34; ... Error: access denied: \u0026#34;vim\u0026#34; is not whitelisted in policy \u0026#34;security.exec.allow\u0026#34;; the current security configuration is: [security] enableInlineShortcodes = false [security.exec] allow = [\u0026#39;^dart-sass-embedded$\u0026#39;, \u0026#39;^go$\u0026#39;, \u0026#39;^npx$\u0026#39;, \u0026#39;^postcss$\u0026#39;] osEnv = [\u0026#39;(?i)^(PATH|PATHEXT|APPDATA|TMP|TEMP|TERM)$\u0026#39;] [security.funcs] getenv = [\u0026#39;^HUGO_\u0026#39;] [security.http] methods = [\u0026#39;(?i)GET|POST\u0026#39;] urls = [\u0026#39;.*\u0026#39;] 対応方法 以下の設定を confg.toml に追加する。\n[security] [security.exec] allow = [\u0026#39;^vim$\u0026#39;] 環境 % sw_vers ProductName: macOS ProductVersion: 12.2 BuildVersion: 21D49 % hugo version hugo v0.93.3+extended darwin/amd64 BuildDate=unknown ","permalink":"https://d.oppara.tv/posts/2022/03/hugo-with-editor/","summary":"\u003ch2 id=\"問題\"\u003e問題\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e--editor\u003c/code\u003e オプション付きで \u003ccode\u003ehugo new\u003c/code\u003e すると以下のエラーになってしまう。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% hugo new posts/2022/03/hoge/index.md --editor vim\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eContent \u0026#34;/path/to/hugo/content/posts/2022/03/hoge/index.md\u0026#34; created\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eEditing \u0026#34;/path/to/hugo/content/posts/2022/03/hoge/index.md\u0026#34; with \u0026#34;vim\u0026#34; ...\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eError: access denied: \u0026#34;vim\u0026#34; is not whitelisted in policy \u0026#34;security.exec.allow\u0026#34;; \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ethe current security configuration is:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e[security]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  enableInlineShortcodes = false\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  [security.exec]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    allow = [\u0026#39;^dart-sass-embedded$\u0026#39;, \u0026#39;^go$\u0026#39;, \u0026#39;^npx$\u0026#39;, \u0026#39;^postcss$\u0026#39;]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    osEnv = [\u0026#39;(?i)^(PATH|PATHEXT|APPDATA|TMP|TEMP|TERM)$\u0026#39;]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e  [security.funcs]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    getenv = [\u0026#39;^HUGO_\u0026#39;]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e  [security.http]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    methods = [\u0026#39;(?i)GET|POST\u0026#39;]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    urls = [\u0026#39;.*\u0026#39;]\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"対応方法\"\u003e対応方法\u003c/h2\u003e\n\u003cp\u003e以下の設定を \u003ccode\u003econfg.toml\u003c/code\u003e に追加する。\u003c/p\u003e","title":"--editor オプション付きで hugo new するとエラーになる"},{"content":"Configure Hugo | Hugo\n日本語周り # デフォルトの言語設定 defaultContentLanguage = \u0026#34;ja\u0026#34; # \u0026lt;language\u0026gt; エレメント用の値 languageCode = \u0026#34;ja\u0026#34; # 日本語の文字数を正しく数えて、短いサマリーを表示できるようにする hasCJKLanguage = true # リスト内のタイトルを複数化しない pluralizeListTitles = false # timezone timeZone = \u0026#34;Asia/Tokyo\u0026#34; テーマ PaperMod の設定 [Params] # 著者名 author = \u0026#34;oppara\u0026#34; # 日付のフォーマット dateformat = \u0026#34;2006-01-02\u0026#34; # リストページに表示される投稿毎の要約を非表示にする hideSummary = true # リストページに1つめに表示される投稿のデザインを他の投稿のデザインと同じにする disableSpecial1stPost = true # 投稿ページで目次を表示する ShowToc = true # パン屑メニューを表示する ShowBreadCrumbs = true # 投稿ページの下部にナビゲーションリンクを表示する ShowPostNavLinks = true 環境 % sw_vers ProductName: macOS ProductVersion: 12.2 BuildVersion: 21D49 % hugo version hugo v0.93.3+extended darwin/amd64 BuildDate=unknown ","permalink":"https://d.oppara.tv/posts/2022/03/hugo-config/","summary":"\u003cp\u003e\u003ca href=\"https://gohugo.io/getting-started/configuration/\"\u003eConfigure Hugo | Hugo\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"日本語周り\"\u003e日本語周り\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-toml\" data-lang=\"toml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# デフォルトの言語設定\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003edefaultContentLanguage\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ja\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# \u0026lt;language\u0026gt; エレメント用の値\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003elanguageCode\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ja\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# 日本語の文字数を正しく数えて、短いサマリーを表示できるようにする\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ehasCJKLanguage\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# リスト内のタイトルを複数化しない\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003epluralizeListTitles\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# timezone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003etimeZone\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Asia/Tokyo\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"テーマ-papermod-の設定\"\u003eテーマ \u003ca href=\"https://github.com/adityatelange/hugo-PaperMod/wiki/Variables\"\u003ePaperMod\u003c/a\u003e の設定\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-toml\" data-lang=\"toml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e[\u003cspan style=\"color:#a6e22e\"\u003eParams\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# 著者名\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eauthor\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;oppara\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# 日付のフォーマット\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003edateformat\u003c/span\u003e = \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;2006-01-02\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# リストページに表示される投稿毎の要約を非表示にする\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003ehideSummary\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# リストページに1つめに表示される投稿のデザインを他の投稿のデザインと同じにする\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003edisableSpecial1stPost\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# 投稿ページで目次を表示する\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eShowToc\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# パン屑メニューを表示する\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eShowBreadCrumbs\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#75715e\"\u003e# 投稿ページの下部にナビゲーションリンクを表示する\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eShowPostNavLinks\u003c/span\u003e = \u003cspan style=\"color:#66d9ef\"\u003etrue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"環境\"\u003e環境\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% sw_vers\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductName:    macOS\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eProductVersion: 12.2\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eBuildVersion:   21D49\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e% hugo version\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehugo v0.93.3+extended darwin/amd64 BuildDate=unknown\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e","title":"Hugo の設定"},{"content":"はじめに Quick Start | Hugo\nとりあえずテーマをインストールしてコンテンツを表示するところまで。\nHugo のインストール % brew install hugo サイトの作成 % hugo new site d.oppara.tv テーマの追加 PaperMod というテーマを使ってみる。\n% cd d.oppara.tv % git init % git add . % git commit -m \u0026#39;feat: initial commit\u0026#39; % git submodule add https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod % echo theme = \\\u0026#34;PaperMod\\\u0026#34; \u0026gt;\u0026gt; config.toml % git add . % git commit -m \u0026#39;fead: add theme\u0026#39; テーマの更新 % git submodule update --remote --merge テーマの削除 % git submodule deinit -f themes/PaperMod % git rm -f themes/PaperMod % rm -rf .git/modules/themes* コンテンツの作成 % hugo new posts/hoge.md % echo \u0026#39;hogehoge\u0026#39; \u0026gt;\u0026gt; content/posts/hoge.md .hugo_build.lockをバージョン管理外にする。\n% echo \u0026#39;.hugo_build.lock\u0026#39; \u0026gt; .gitignore % git add .gitignore % git commit -m \u0026#39;Add .gitignore\u0026#39; サーバの起動 % hugo server -D ブラウザで動作確認 % open http://localhost:1313/ 環境 % sw_vers ProductName: macOS ProductVersion: 12.2 BuildVersion: 21D49 % hugo version hugo v0.93.3+extended darwin/amd64 BuildDate=unknown ","permalink":"https://d.oppara.tv/posts/2022/03/hugo-quick-start/","summary":"\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://gohugo.io/getting-started/quick-start/\"\u003eQuick Start | Hugo\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eとりあえずテーマをインストールしてコンテンツを表示するところまで。\u003c/p\u003e\n\u003ch2 id=\"hugo-のインストール\"\u003eHugo のインストール\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% brew install hugo\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"サイトの作成\"\u003eサイトの作成\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% hugo new site d.oppara.tv\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"テーマの追加\"\u003eテーマの追加\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/adityatelange/hugo-PaperMod\"\u003ePaperMod\u003c/a\u003e というテーマを使ってみる。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% cd d.oppara.tv\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% git init\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% git add .\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% git commit  -m \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;feat: initial commit\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% git submodule add  https://github.com/adityatelange/hugo-PaperMod.git themes/PaperMod\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% echo theme \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e\\\u0026#34;\u003c/span\u003ePaperMod\u003cspan style=\"color:#ae81ff\"\u003e\\\u0026#34;\u003c/span\u003e \u0026gt;\u0026gt; config.toml\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% git add .\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% git commit  -m \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;fead: add theme\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"テーマの更新\"\u003eテーマの更新\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% git submodule update --remote --merge\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\"テーマの削除\"\u003eテーマの削除\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% git submodule deinit -f themes/PaperMod\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% git rm -f themes/PaperMod\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% rm -rf .git/modules/themes*\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"コンテンツの作成\"\u003eコンテンツの作成\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% hugo new posts/hoge.md\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e% echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;hogehoge\u0026#39;\u003c/span\u003e \u0026gt;\u0026gt; content/posts/hoge.md\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e\u003ccode\u003e.hugo_build.lock\u003c/code\u003eをバージョン管理外にする。\u003c/p\u003e","title":"Hugo 事始め"}]